"use strict";angular.module("app.services.use",[]).factory("UsesFactory",function(){return function(){this.usesAtomizedType={sourceOfInformation:{references:[],sourceOfInformationText:""},useValue:"",partUsed:"",users:"",organisms:"",vernacularNameUseAnnotations:"",productionDetails:"",meansOfApplicationAdministration:"",seasonOfAvailabilityUse:"",conservationExplotationData:"",useTypeAtomized:"",economics:"",ratingPopularity:"",properties:"",potential:"",useNotes:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.use",[]).controller("UsesCtrl",["$scope","ReferenceFactory","AncillaryDataFactory","UsesFactory",function(e,a,n,t){var c=new t;e.usesAtomizedType=c.usesAtomizedType;var r=new n;e.ancillaryData=r.ancillaryData;var i=new a;e.reference=i.reference;var l=angular.copy(e.usesAtomizedType),o=angular.copy(e.reference),s=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_usesAtomized="",e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addUse=function(){e.formData.usesManagementAndConservation.usesAtomized.length>0&&console.log("enviar cambios")},e.addUsesAtomized=function(a,n){console.log("Hola"),JSON.stringify(n)!==JSON.stringify(l)&&(""!==e.index_usesAtomized?a[e.index_usesAtomized]=angular.copy(n):c.add(a,n),e.usesAtomizedType=l,l=angular.copy(e.usesAtomizedType),e.index_usesAtomized="")},e.removeUsesAtomized=function(e,a){c["delete"](e,a)},e.editUsesAtomized=function(a,n,t){e.index_usesAtomized=t,e.usesAtomizedType=angular.copy(n)},e.cancelUsesAtomized=function(){e.index_usesAtomized="",e.usesAtomizedType=angular.copy(l)},e.addAncillaryData=function(a,n){if(""!==n.license){var t=document.getElementById("ancillaryData.license");void 0!==t&&null!==t&&(n.license=t.value),r.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){i.addTo(e.formData.references,a)}),e.ancillaryData=s,s=angular.copy(e.ancillaryData),e.resetLicenseList(t,e.lincese_list),e.index_ancillary="",$("#ancillaryUse").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){r.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseUses").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryUse").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(s);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryUse").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(i.addTo(a,n,e.index_reference),e.reference=o,o=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){i.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(o),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.managementAndConservation",[]).factory("ManagementAndConservationAtomizedFactory",function(){return function(){this.managementAndConservationAtomizedType={type:"",objective:"",managementPlan:"",actions:[],humanAndEnvironmentalrelevanc:"",ancillaryData:[]},this.usesManagementAndConservation={usesAtomized:[],managementAndConservation:{managementAndConservationAtomized:[],managementAndConservationUnstructured:"",ancillaryData:[]}},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.managementAndConservation",[]).controller("ManagementAndConservationCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){e.managementAndConservationAtomizedType=e.managementAndConservationAtomizedFactoryLocal.managementAndConservationAtomizedType;var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.managementAndConservationAtomizedType),i=angular.copy(e.reference),l=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_management="",e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addManagement=function(){""!==e.formData.usesManagementAndConservation.managementAndConservationAtomized.length&&console.log("enviar cambios")},e.addManagementAndConservation=function(a,n){JSON.stringify(n)!==JSON.stringify(r)&&(""!==e.index_management?a[e.index_management]=angular.copy(n):e.managementAndConservationAtomizedFactoryLocal.add(a,n),e.managementAndConservationAtomizedType=r,r=angular.copy(e.managementAndConservationAtomizedType),e.index_management="")},e.removeManagementAndConservation=function(a,n){e.managementAndConservationAtomizedFactoryLocal["delete"](a,n)},e.editManagementAndConservation=function(a,n,t){e.index_management=t,e.managementAndConservationAtomizedType=angular.copy(n)},e.cancelManagementAndConservation=function(){e.managementAndConservationAtomizedType=angular.copy(r),e.index_management=""},e.removeAction=function(e,a){var n=e.indexOf(a);e.splice(n,1)},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=l,l=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryManagement").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseManagement").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryManagement").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(l);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryManagement").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=i,i=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(i),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.identificationKeys",[]).factory("IdentificationKeysFactory",function(){return function(){this.identificationKeys={keys:[],ancillaryData:[]}}}),angular.module("app.controllers.identificationKeys",[]).controller("IdentificationKeysCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.referenceSN),i=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addIdentificationKeys=function(){""!==e.formData.identificationKeys.keys&&console.log("enviar cambios")},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=i,i=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryIdentificationKeys").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n),$("#ancillaryIdentificationKeys").collapse("show");var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseIdentification").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}})},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryIdentificationKeys").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=r,r=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(r),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.fullDescription",[]).factory("FullDescriptionFactory",function(){return function(){this.fullDescription={fullDescriptionAtomized:[],ancillaryDataA:[],fullDescriptionUnstructured:"",ancillaryData:[]}}}),angular.module("app.controllers.fullDescription",[]).controller("FullDescriptionCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.reference),i=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addFullDescription=function(){""!==e.formData.fullDescription.fullDescriptionUnstructured&&console.log("enviar cambios")},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=i,i=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryFullDescripcion").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseFullDescription").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryFullDescripcion").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryFullDescripcion").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=r,r=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(r),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.controllers.briefDescription",[]).controller("BriefDescriptionCtrl",["$scope",function(e){e.addBriefDescription=function(){""!==e.formData.briefDescription&&console.log("enviar cambios")}}]),angular.module("app.services.reference",[]).factory("ReferenceFactory",function(){return function(){this.reference={id:"",profile_id:"",group_id:"",created:"",last_modified:"",identifiers:[],"abstract":"",tags:"",type:"",source:"",title:"",authors:[],year:"",volume:"",issue:"",pages:"",series:"",chapter:"",websites:"",accessed:"",publisher:"",address:"",edition:"",institution:"",editors:[],keywords:[],doi:"",isbn:"",issn:"",link:""},this.addTo=function(e,a,n){if(""!==n)e[n]=angular.copy(a);else{var t=e.indexOf(a);-1===t&&e.push(a)}},this.deleteFrom=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.reference",[]).controller("ReferenceCrtl",["$scope","ReferenceFactory",function(e,a){var n=new a;e.reference=n.reference,e.index_reference="";var t=angular.copy(e.reference);e.checked=!1,e.slide=function(){e.checked=!e.checked},e.addReferences=function(){e.formData.references.length>0&&console.log("enviar")},e.addReference=function(a,c){n.addTo(a,c,e.index_reference),e.reference=angular.copy(t),t=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""},e.removeReference=function(e,a){n.deleteFrom(e,a)},e.editReference=function(a,n,t){e.index_reference=t,e.reference=angular.copy(n),e.checked=!e.checked},e.cancelReference=function(){e.reference=angular.copy(t),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.taxonRecordName",[]).factory("TaxonRecordNameFactory",function(){return function(){this.taxonRecordName={scientificName:{attributes:{id:"",isAnamorphic:"",nomenclaturalCode:""},simple:"",rank:"",canonicalName:{simple:"",uninomial:"",genus:{ref:"",linkType:""},epithet:{infragenericEpithet:"",specificEpithet:"",infraspecificEpithet:""}},canonicalAuthorship:{simple:"",authorship:{simple:"",year:[],authors:[]}},specialAuthorship:{basionymAuthorship:{simple:"",year:[],authors:[]},combinationAuthorship:[]},publishedln:{identifier:"",datatype:"",source:""},year:"",microReference:"",typificacion:{simple:"",typeVoucherEntity:{voucherReference:[],lectotypePublicationVoucher:[],lectotypeMicroReferenceVoucher:[],typeOfType:""}},typeNameEntity:{nameReference:{identifier:"",datatype:"",source:""},lectotypePublication:{identifier:"",datatype:"",source:""},lectotypeMicroReference:{identifier:"",datatype:"",source:""}},spellingCorrentionOf:[],basionym:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},basedOn:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},conservedAgainst:[],laterHomonymOf:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},sanctioned:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},replacementNameFor:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},publicationStatus:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},providerLink:"",providerSpecificData:{anyOne:[],anyTwo:""},ancillaryData:[]}}}}),angular.module("app.controllers.taxonRecordName",[]).controller("TaxonRecordNameCtrl",["$scope",function(e){e.findLanguageName=function(a){if(void 0!==a&&""!==a)for(var n=0,t=e.idiomas.length;t>n;n+=1)if(e.idiomas[n].ISO===a)return e.idiomas[n].Idioma},e.getTaxonInformation=function(a){var n="";e.formData.synonymsAtomized=[],e.formData.commonNameAtomized=[],e.formData.hierarchy=[],e.formData.taxonRecordName.scientificName.simple=a,e.formData.taxonRecordName.scientificName.rank="",e.formData.taxonRecordName.scientificName.canonicalName.simple="",e.formData.taxonRecordName.scientificName.canonicalAuthorship.simple="",e.formData.taxonRecordName.scientificName.publishedln.simple="",$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("Accept-Language","en-US,en;q=0.8,es;q=0.6")}}),$.getJSON("http://api.gbif.org/v1/species?name="+a+"&limit=1",function(a){a.results.length>0&&e.$apply(function(){switch(e.formData.taxonRecordName.scientificName.simple=void 0!==a.results[0].scientificName?a.results[0].scientificName:"",e.formData.taxonRecordName.scientificName.rank=void 0!==a.results[0].rank?a.results[0].rank:"",e.formData.taxonRecordName.scientificName.canonicalName.simple=void 0!==a.results[0].canonicalName?a.results[0].canonicalName:"",e.formData.taxonRecordName.scientificName.canonicalAuthorship.simple=void 0!==a.results[0].authorship?a.results[0].authorship:"",e.formData.taxonRecordName.scientificName.publishedln.simple=void 0!==a.results[0].publishedIn?a.results[0].publishedIn:"",e.formData.hierarchy.push({classification:"",recommended:"",kingdom:void 0!==a.results[0].kingdom?a.results[0].kingdom:"",phylum:void 0!==a.results[0].phylum?a.results[0].phylum:"",classHierarchy:void 0!==a.results[0]["class"]?a.results[0]["class"]:"",order:void 0!==a.results[0].order?a.results[0].order:"",family:void 0!==a.results[0].family?a.results[0].family:"",genus:void 0!==a.results[0].genus?a.results[0].genus:"",subGenus:"",taxonRank:void 0!==a.results[0].rank?a.results[0].rank:"",specificEpithet:"",infraspecificEpithet:"",higherClassification:"",parentTaxon:void 0!==a.results[0].parent?a.results[0].parent:"",ancillaryData:[{identifier:"",dataType:"",mimeType:"",agent:[{firstName:"",lastName:"",organisation:"",position:"",address:"",phone:"",email:"",role:"",homepage:""}],created:e.date,modified:e.date,title:"",license:"",rights:"",rigthsHolder:"",bibliographicCitation:"",audience:[],source:void 0!==a.results[0].accordingTo?a.results[0].accordingTo:"",subject:[],description:"",mediaURL:[],thumbnailURL:"",location:"",geoPoint:"",reference:[],additionalInformation:"",dataObject:""}]}),angular.lowercase(a.results[0].rank)){case"kingdom":n=a.results[0].kingdomKey;break;case"phylum":n=a.results[0].phylumKey;break;case"class":n=a.results[0].classKey;break;case"order":n=a.results[0].orderKey;break;case"family":n=a.results[0].familyKey;break;case"genus":n=a.results[0].genusKey;break;case"species":n=a.results[0].speciesKey;break;default:n=""}""!==n&&($.getJSON("http://api.gbif.org/v1/species/"+n+"/synonyms",function(a){a.results.length>0&&e.$apply(function(){for(var n=0;n<a.results.length;n++)e.formData.synonymsAtomized.push({synonymName:{attributes:{id:"",isAnamorphic:"",nomenclaturalCode:""},simple:void 0!==a.results[n].scientificName?a.results[n].scientificName:"",rank:void 0!==a.results[n].rank?a.results[n].rank:"",canonicalName:{simple:void 0!==a.results[n].canonicalName?a.results[n].canonicalName:"",uninomial:"",genus:{ref:"",linkType:""},epithet:{infragenericEpithet:"",specificEpithet:"",infraspecificEpithet:""}},canonicalAuthorship:{simple:void 0!==a.results[n].authorship?a.results[n].authorship:"",authorship:{simple:"",year:[],authors:[]}},specialAuthorship:{basionymAuthorship:{simple:"",year:[],authors:[]},combinationAuthorship:[]},publishedln:{identifier:"",datatype:"",source:void 0!==a.results[n].publishedIn?a.results[n].publishedIn:""},year:"",microReference:"",typificacion:{simple:"",typeVoucherEntity:{voucherReference:[],lectotypePublicationVoucher:[],lectotypeMicroReferenceVoucher:[],typeOfType:""},typeNameEntity:{nameReference:{identifier:"",datatype:"",source:""},lectotypePublication:{identifier:"",datatype:"",source:""},lectotypeMicroReference:{identifier:"",datatype:"",source:""}}},spellingCorrentionOf:[],basionym:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},basedOn:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},conservedAgainst:[],laterHomonymOf:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},sanctioned:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},replacementNameFor:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},publicationStatus:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},providerLink:"",providerSpecificData:{anyOne:[],anyTwo:""}},synonymStatus:void 0!==a.results[n].nomenclaturalStatus&&void 0!==a.results[n].nomenclaturalStatus[0]?a.results[n].nomenclaturalStatus:"",ancillaryData:[]})})}),$.getJSON("http://api.gbif.org/v1/species/"+n+"/vernacularNames",function(a){a.results.length>0&&e.$apply(function(){for(var n=0;n<a.results.length;n++)e.formData.commonNameAtomized.push({name:void 0!==a.results[n].vernacularName?a.results[n].vernacularName:"",language:void 0!==a.results[n].language?e.findLanguageName(a.results[n].language):"",usedIn:{distributionScope:{type:"",ancillaryData:[]},temporalCoverage:{startDate:"",endDate:""},distributionAtomizedBranch:[],distributionUnstructured:void 0!==a.results[n].area?a.results[n].area:"",ancillaryData:[]},usedBy:"",ancillaryData:[]})})}))})})}}]),angular.module("app.services.synonmy",[]).factory("SynonmyFactory",function(){return function(){this.synonmy={synonymName:{attributes:{id:"",isAnamorphic:"",nomenclaturalCode:""},simple:"",rank:"",canonicalName:{simple:"",uninomial:"",genus:{ref:"",linkType:""},epithet:{infragenericEpithet:"",specificEpithet:"",infraspecificEpithet:""}},canonicalAuthorship:{simple:"",authorship:{simple:"",year:[],authors:[]}},specialAuthorship:{basionymAuthorship:{simple:"",year:[],authors:[]},combinationAuthorship:[]},publishedln:{identifier:"",datatype:"",source:""},year:"",microReference:"",typificacion:{simple:"",typeVoucherEntity:{voucherReference:[],lectotypePublicationVoucher:[],lectotypeMicroReferenceVoucher:[],typeOfType:""},typeNameEntity:{nameReference:{identifier:"",datatype:"",source:""},lectotypePublication:{identifier:"",datatype:"",source:""},lectotypeMicroReference:{identifier:"",datatype:"",source:""}}},spellingCorrentionOf:[],basionym:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},basedOn:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},conservedAgainst:[],laterHomonymOf:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},sanctioned:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},replacementNameFor:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},publicationStatus:{ruleConsidered:"",note:"",reletedName:{identifier:"",datatype:"",source:""},publishedln:{identifier:"",datatype:"",source:""},microReference:""},providerLink:"",providerSpecificData:{anyOne:[],anyTwo:""}},synonymStatus:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.synonmy",[]).controller("SynonmyCtrl",["$scope","ReferenceFactory","AncillaryDataFactory","SynonmyFactory",function(e,a,n,t){var c=new t;e.synonmy=c.synonmy;var r=new n;e.ancillaryData=r.ancillaryData;var i=new a;e.reference=i.reference;var l=angular.copy(e.synonmy),o=angular.copy(e.reference),s=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_synonyms="",e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addSynonymsAtomized=function(a,n){JSON.stringify(n)!==JSON.stringify(l)&&(""!==e.index_synonyms?a[e.index_synonyms]=angular.copy(n):c.add(a,n),e.synonmy=l,l=angular.copy(e.synonmy),e.index_synonyms="",$("#sysnonymForm").collapse("hide"))},e.removeSynonymsAtomized=function(e,a){c["delete"](e,a)},e.editSynonymsAtomized=function(a,n,t){e.synonmy=angular.copy(n),e.index_synonyms=t,$("#sysnonymForm").collapse("show")},e.cancelSynonym=function(){e.synonmy=angular.copy(l),e.index_synonyms="",$("#sysnonymForm").collapse("hide")},e.addAncillaryData=function(a,n){if(""!==n.license){var t=document.getElementById("ancillaryData.license");void 0!==t&&null!==t&&(n.license=t.value),r.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){i.addTo(e.formData.references,a)}),e.ancillaryData=s,s=angular.copy(e.ancillaryData),e.resetLicenseList(t,e.lincese_list),e.index_ancillary=""}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){r.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseLifeForm").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}})},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(i.addTo(a,n,e.index_reference),e.reference=o,o=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){i.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(o),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.hierarchy",[]).factory("HierarchyFactory",function(){return function(){this.hierarchy={classification:"",recommended:"",kingdom:"",phylum:"",classHierarchy:"",order:"",family:"",genus:"",subGenus:"",taxonRank:"",specificEpithet:"",infraspecificEpithet:"",higherClassification:"",parentTaxon:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.hierarchy",[]).controller("HierarchyCtrl",["$scope","ReferenceFactory","AncillaryDataFactory","HierarchyFactory",function(e,a,n,t){var c=new t;e.hierarchy=c.hierarchy;var r=new n;e.ancillaryData=r.ancillaryData;var i=new a;e.reference=i.reference;var l=angular.copy(e.hierarchy),o=angular.copy(e.reference),s=angular.copy(e.ancillaryData);e.checked=!1,e.index_hierarchy="",e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addHierarchy=function(a,n){JSON.stringify(n)!==JSON.stringify(l)&&(""!==e.index_hierarchy?a[e.index_hierarchy]=angular.copy(n):c.add(a,n),e.hierarchy=l,l=angular.copy(e.hierarchy),e.index_hierarchy="",$("#hierarchyForm").collapse("hide"))},e.removeHierarchy=function(e,a){c["delete"](e,a)},e.editHierarchy=function(a,n,t){e.hierarchy=angular.copy(n),e.index_hierarchy=t,$("#hierarchyForm").collapse("show")},e.cancelHierarchy=function(){e.hierarchy=angular.copy(l),e.index_hierarchy="",$("#hierarchyForm").collapse("hide")},e.addAncillaryData=function(a,n){""!==n.license?(r.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){i.addTo(e.formData.references,a)}),e.ancillaryData=s,s=angular.copy(e.ancillaryData),e.index_ancillary=""):alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){r.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.ancillaryData=angular.copy(n),e.index_ancillary=t},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(i.addTo(a,n,e.index_reference),e.reference=o,o=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){i.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(o),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.commonName",[]).factory("CommonNameFactory",function(){return function(){this.commonName={name:"",language:"",usedIn:{distributionScope:{type:"",ancillaryData:[]},temporalCoverage:{startDate:"",endDate:""},distributionAtomizedBranch:[],distributionUnstructured:"",ancillaryData:[]},usedBy:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.commonName",[]).controller("CommonNameCtrl",["$scope","ReferenceFactory","AncillaryDataFactory","CommonNameFactory",function(e,a,n,t){var c=new t;e.commonName=c.commonName;var r=new n;e.ancillaryData=r.ancillaryData;var i=new a;e.reference=i.reference;var l=angular.copy(e.commonName),o=angular.copy(e.reference),s=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_common="",e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addCommonNamesAtomized=function(a,n){JSON.stringify(n)!==JSON.stringify(l)&&(""!==e.index_common?a[e.index_common]=angular.copy(n):c.add(a,n),e.commonName=l,l=angular.copy(e.commonName),e.index_common="",$("#commonNameForm").collapse("hide"))},e.removeCommonNamesAtomized=function(e,a){c["delete"](e,a)},e.editCommonNamesAtomized=function(a,n,t){e.commonName=angular.copy(n),e.index_common=t,$("#commonNameForm").collapse("show")},e.cancelCommonNamesAtomized=function(){e.commonName=angular.copy(l),
e.index_common="",$("#commonNameForm").collapse("hide")},e.addAncillaryData=function(a,n){if(""!==n.license){var t=document.getElementById("ancillaryData.license");void 0!==t&&null!==t&&(n.license=t.value),r.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){i.addTo(e.formData.references,a)}),e.ancillaryData=s,s=angular.copy(e.ancillaryData),e.resetLicenseList(t,e.lincese_list),e.index_ancillary=""}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){r.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseLifeForm").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}})},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(i.addTo(a,n,e.index_reference),e.reference=o,o=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){i.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(o),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.invasiveness",[]).factory("InvasivenessFactory",function(){return function(){this.invasivenessAtomizedType={origin:"",presence:"",persistence:"",distribution:[],harmful:"",modified:"",startValidateDate:"",endValidateDate:"",countryCode:"Colombia",stateProvince:"",county:"",localityName:"",language:"",citation:"",abundance:"",trend:"",rateOfSpread:"",regulatoryListing:"",memo:"",publicationDate:"",localityType:"",locationValue:"",publicationDatePrecision:"",whatImpact:"",vector:"",route:"",target:"",mechanism:"",ancillaryData:[]},this.invasiveness={invasivenessAtomized:[],invasivenessUnstructured:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.invasiveness",[]).controller("InvasivenessCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){e.invasivenessAtomizedType=e.invasivenessFactoryLocal.invasivenessAtomizedType;var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=new a;e.referenceAto=r.reference;var i=new n;e.ancillaryDataAto=i.ancillaryData;var l=angular.copy(e.invasivenessAtomizedType),o=angular.copy(e.reference),s=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.lincese_list_ato=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.prov_contenido_ato=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_invasiveness="",e.index_ancillary="",e.index_reference="",e.index_ancillary_ato="",e.index_reference_ato="",e.slide=function(){e.checked=!e.checked},e.checked_ato=!1,e.slide_ato=function(){e.checked_ato=!e.checked_ato},e.addInvasiveness=function(){""!==e.formData.invasiveness.invasivenessUnstructured&&console.log("enviar cambios")},e.addInvasivenessAtomizedType=function(a,n){JSON.stringify(n)!==JSON.stringify(l)&&(""!==e.index_invasiveness?a[e.index_invasiveness]=angular.copy(n):e.invasivenessFactoryLocal.add(a,n),e.invasivenessAtomizedType=l,l=angular.copy(e.invasivenessAtomizedType),e.UpdateCheckBoxes(n,!1),e.index_invasiveness="")},e.removeInvasivenessAtomized=function(a,n){e.invasivenessFactoryLocal["delete"](a,n)},e.editInvasivenessAtomized=function(a,n,t){e.index_invasiveness=t,e.invasivenessAtomizedType=angular.copy(n),e.UpdateCheckBoxes(n,!0)},e.cancelInvasivenessAtomizedType=function(a){e.invasivenessAtomizedType=angular.copy(l),e.UpdateCheckBoxes(a,!1),e.index_invasiveness=""},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=s,s=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryInvasiveness").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseInvasivenessUn").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryInvasiveness").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(s);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryInvasiveness").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=o,o=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(o),e.checked=!e.checked,e.index_reference=""},e.addAncillaryDataAto=function(a,n){if(""!==n.license){var t=document.getElementById("ancillaryData.license");void 0!==t&&null!==t&&(n.license=t.value),i.addTo(a,n,e.index_ancillary_ato),angular.forEach(n.reference,function(a){r.addTo(e.formData.references,a)}),e.ancillaryData=s,s=angular.copy(e.ancillaryData),e.resetLicenseList(t,e.lincese_list_ato),e.index_ancillary_ato="",$("#ancillaryInvasivenessAto").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.editAncillaryDataAto=function(a,n,t){e.index_ancillary_ato=t,e.ancillaryDataAto=angular.copy(n);var c=!1;angular.forEach(e.lincese_list_ato,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseInvasivenessAto").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryInvasivenessAto").collapse("show")},e.cancelAncillaryDataAto=function(){e.ancillaryDataAto=angular.copy(s);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list_ato),e.index_ancillary_ato="",$("#ancillaryInvasivenessAto").collapse("hide")},e.findAncillaryAto=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReferenceAto=function(a,n){""!==n.type?(r.addTo(a,n,e.index_reference_ato),e.referenceAto=o,o=angular.copy(e.referenceAto),e.checked_ato=!e.checked_ato,e.index_reference_ato=""):alert("El tipo de referencia debe ser seleccionado")},e.editReferenceAto=function(a,n,t){e.referenceAto=angular.copy(n),e.checked_ato=!e.checked_ato,e.index_reference_ato=t},e.cancelReferenceAto=function(){e.referenceAto=angular.copy(o),e.checked_ato=!e.checked_ato,e.index_reference_ato=""},e.findAncillaryAto=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryDataAto=angular.copy(n))})},e.UpdateCheckBoxes=function(a,n){angular.forEach(e.lenguajes.origin,function(e){null!==a.origin&&a.origin===e.name&&(e.checked=n)}),angular.forEach(e.lenguajes.presence,function(e){null!==a.presence&&a.presence===e.name&&(e.checked=n)}),angular.forEach(e.lenguajes.persistence,function(e){null!==a.persistence&&a.persistence===e.name&&(e.checked=n)}),angular.forEach(e.lenguajes.distribution,function(e){angular.forEach(a.distribution,function(a){null!==a&&a===e.name&&(e.checked=n)})}),angular.forEach(e.lenguajes.harmful,function(e){null!==a.harmful&&a.harmful===e.name&&(e.checked=n)}),angular.forEach(e.lenguajes.abundance,function(e){null!==a.abundance&&a.abundance===e.name&&(e.checked=n)}),angular.forEach(e.lenguajes.trend,function(e){null!==a.trend&&a.trend===e.name&&(e.checked=n)}),angular.forEach(e.lenguajes.rateOfSpread,function(e){null!==a.rateOfSpread&&a.rateOfSpread===e.name&&(e.checked=n)}),angular.forEach(e.lenguajes.regulatoryListing,function(e){null!==a.regulatoryListing&&a.regulatoryListing===e.name&&(e.checked=n)}),angular.forEach(e.lenguajes.localityType,function(e){null!==a.localityType&&a.localityType===e.name&&(e.checked=n)}),angular.forEach(e.lenguajes.locationStandard,function(e){null!==a.locationValue&&a.locationValue===e.name&&(e.checked=n)}),angular.forEach(e.lenguajes.publicationDatePrecision,function(e){null!==a.publicationDatePrecision&&a.publicationDatePrecision===e.name&&(e.checked=n)})}}]),angular.module("app.services.reproduction",[]).factory("ReproductionFactory",function(){return function(){this.reproduction={reproductionAtomized:[],reproductionUnstructured:"",ancillaryData:[]},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.reproduction",[]).controller("ReproductionCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.reference),i=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addReproduction=function(){""!==e.formData.reproduction.reproductionUnstructured&&console.log("enviar cambios")},e.removeReproductionAtomized=function(a,n){e.reproductionFactoryLocal["delete"](a,n)},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=i,i=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryReproduction").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseReproduction").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryReproduction").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryReproduction").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=r,r=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(r),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.molecularData",[]).factory("MolecularDataFactory",function(){return function(){this.molecularDataAtomizedType={measurementOrFact:{measurementOrFact:{measurementID:"",measurementType:"",measurementValue:"",measurementAccuracy:"",measurementUnit:"",measurementDeterminedDate:"",measurementDeterminedBy:[],measurementMethod:"",measurementRemarks:"",relatedTo:""},ancillaryData:{identifier:"",dataType:"",mimeType:"",agent:[],created:"",modified:"",license:"",rights:"",rightsHolder:"",bibliographicCitation:"",audience:[],source:"",subject:[],description:"",mediaURL:[],thumbnailURL:"",location:"",geoPoint:"",reference:[],additionalInformation:"",dataObject:""}}},this.molecularData={molecularDataAtomized:[],molecularDataUnstructured:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.molecularData",[]).controller("MolecularDataCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){e.molecularDataAtomizedType=e.molecularDataFactoryLocal.molecularDataAtomizedType;var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.molecularDataAtomizedType),i=angular.copy(e.reference),l=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addMolecularData=function(){e.formData.molecularData.molecularDataUnstructured.length>0&&console.log("enviar cambios")},e.addMolecularDataAtomizedType=function(a,n){JSON.stringify(n)!==JSON.stringify(r)&&(e.molecularDataFactoryLocal.add(a,n),e.molecularDataAtomizedType=r,r=angular.copy(e.molecularDataAtomizedType))},e.removeMolecularDataAtomizedType=function(a,n){e.molecularDataFactoryLocal["delete"](a,n)},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=l,l=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryMolecular").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseDataMolecular").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryMolecular").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(l);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryMolecular").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=i,i=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(i),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.migratory",[]).factory("MigratoryFactory",function(){return function(){this.migratoryAtomizedType={causes:"",patterns:"",routes:[],season:"",ancillaryData:[]},this.migratory={migratoryAtomized:[],migratoryUnstructured:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.migratory",[]).controller("MigratoryCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){e.migratoryAtomizedType=e.migratoryFactoryLocal.migratoryAtomizedType;var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.migratoryAtomizedType),i=angular.copy(e.reference),l=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_migratory="",e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addMigratory=function(){""!==e.formData.migratory.migratoryAtomized&&console.log("enviar cambios")},e.addMigratoryAtomizedType=function(a,n){JSON.stringify(n)!==JSON.stringify(r)&&(""!==e.index_migratory?a[e.index_migratory]=angular.copy(n):e.migratoryFactoryLocal.add(a,n),e.migratoryAtomizedType=r,r=angular.copy(e.migratoryAtomizedType),e.index_migratory="")},e.removeMigratoryAtomized=function(a,n){e.migratoryFactoryLocal["delete"](a,n)},e.editMigratoryAtomized=function(a,n,t){e.migratoryAtomizedType=angular.copy(n),e.index_migratory=t},e.cancelMigratoryAtomized=function(){e.migratoryAtomizedType=angular.copy(r),e.index_migratory=""},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=l,l=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryMigratory").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseMigratory").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryMigratory").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(l);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryMigratory").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=i,i=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(i),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.lifeForm",[]).factory("LifeFormFactory",function(){return function(){this.lifeForm={lifeFormAtomized:[],lifeFormUnstructured:"",ancillaryData:[]},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.lifeForm",[]).controller("LifeFormCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.reference),i=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addLifeForm=function(){""!==e.formData.lifeForm.lifeFormUnstructured&&console.log("enviar cambios")},e.removeLifeFormAtomized=function(a,n){e.lifeFormFactoryLocal["delete"](a,n)},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=i,i=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryLifeForm").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseLifeForm").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryLifeForm").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryLifeForm").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=r,r=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(r),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.lifeCycle",[]).factory("LifeCycleFactory",function(){return function(){this.lifeCycle={lifeCycleAtomized:[],lifeCycleUnstructured:"",ancillaryData:[]},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.lifeCycle",[]).controller("LifeCycleCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.reference),i=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addLifeCycle=function(){""!==e.formData.lifeCycle.lifeCycleUnstructured&&console.log("enviar cambios")},e.removeLifeCycleAtomized=function(a,n){e.lifeCycleFactoryLocal["delete"](a,n)},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=i,i=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryLifeCycle").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseLifeFormCycle").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryLifeCycle").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryLifeCycle").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=r,r=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(r),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.interactions",[]).factory("InteractionsFactory",function(){return function(){this.interactionsAtomizedType={interactionSpecies:"",interactionSpeciesType:[],ancillaryData:[]},this.interactions={interactionsAtomized:[],interactionsUnstructured:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.interactions",[]).controller("InteractionsCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){e.interactionsAtomizedType=e.interactionsFactoryLocal.interactionsAtomizedType;var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.interactionsAtomizedType),i=angular.copy(e.reference),l=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_interactions="",e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addInteraction=function(){""!==e.formData.interactions.interactionsUnstructured&&console.log("enviar cambios")},e.addInteractionAtomizedType=function(a,n){JSON.stringify(n)!==JSON.stringify(r)&&(""!==e.index_interactions?a[e.index_interactions]=angular.copy(n):e.interactionsFactoryLocal.add(a,n),e.interactionsAtomizedType=r,r=angular.copy(e.interactionsAtomizedType),e.index_interactions="")},e.removeInteractionAtomizedType=function(a,n){e.interactionsFactoryLocal["delete"](a,n)},e.removeInteractionSpeciesType=function(a,n){e.interactionsFactoryLocal["delete"](a,n)},e.editInteractionAtomizedType=function(a,n,t){e.interactionsAtomizedType=angular.copy(n),e.index_interactions=t},e.cancelInteractionAtomizedType=function(){e.interactionsAtomizedType=angular.copy(r),e.index_interactions=""},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=l,l=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryInteraction").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseInteractions").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryInteraction").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(l);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryInteraction").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=i,i=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(i),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.feeding",[]).factory("FeedingFactory",function(){return function(){this.thropic={strategy:"",strategyRemarks:""},this.feedingAtomizedType={type:"",thropic:[],ancillaryData:[]},this.feeding={feedingAtomized:[],feedingUnstructured:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.feeding",[]).controller("FeedingCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){e.thropic=e.feedingFactoryLocal.thropic,e.feedingAtomizedType=e.feedingFactoryLocal.feedingAtomizedType;var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.feedingAtomizedType),i=angular.copy(e.reference),l=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addFeeding=function(){""!==e.formData.feeding.feedingUnstructured&&console.log("enviar cambios")},e.addFeedingAtomizedType=function(a,n){JSON.stringify(n)!==JSON.stringify(r)&&(e.feedingFactoryLocal.add(a,n),e.feedingAtomizedType=r,r=angular.copy(e.feedingAtomizedType),$("input:checkbox").removeAttr("checked"))},e.removeFeedingAtomizedType=function(a,n){e.feedingFactoryLocal["delete"](a,n)},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=l,l=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryFeeding").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseFeeding").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");
t.value=n.license}}),$("#ancillaryFeeding").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(l);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryFeeding").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=i,i=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(i),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.environmentalEnvelope",[]).factory("EnvironmentalEnvelopeFactory",function(){return function(){this.environmentalEnvelope={environmentalEnvelopeAtomized:[],environmentalEnvelopeUnstructured:"",ancillaryData:[]},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.environmentalEnvelope",[]).controller("EnvironmentalEnvelopeCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.reference),i=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addEnvironmentalEnvelope=function(){""!==e.formData.environmentalEnvelope.environmentalEnvelopeUnstructured&&console.log("enviar cambios")},e.removeEnvironmentalEnvelopeAtomized=function(a,n){e.environmentalEnvelopeFactoryLocal["delete"](a,n)},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=i,i=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryEnvironmentalEnvelope").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseEnviromental").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryEnvironmentalEnvelope").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryEnvironmentalEnvelope").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=r,r=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(r),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.ecologicalSignificance",[]).factory("EcologicalSignificanceFactory",function(){return function(){this.ecologicalSignificance={ecologicalSignificanceAtomized:[],ecologicalSignificanceUnstructured:"",ancillaryData:[]},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.ecologicalSignificance",[]).controller("EcologicalSignificanceCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.reference),i=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addEcologicalSignificance=function(){""!==e.formData.ecologicalSignificance.ecologicalSignificanceUnstructured&&console.log("enviar cambios")},e.removeEcologicalSignificanceAtomized=function(a,n){e.ecologicalSignificanceFactoryLocal["delete"](a,n)},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=i,i=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryEcologicalSignificance").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseEcological").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryEcologicalSignificance").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryEcologicalSignificance").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=r,r=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(r),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.dispersal",[]).factory("DispersalFactory",function(){return function(){this.dispersal={dispersalAtomized:{purpose:"",type:"",structureDispersed:"",distance:{measurementOrFact:{measurementID:"",measurementType:"",measurementValue:"",measurementAccuracy:"",measurementUnit:"",measurementDeterminedDate:"",measurementDeterminedBy:[],measurementMethod:"",measurementRemarks:"",relatedTo:""},ancillaryData:{identifier:"",dataType:"",mimeType:"",agent:[],created:"",modified:"",license:"",rights:"",rightsHolder:"",bibliographicCitation:"",audience:[],source:"",subject:[],description:"",mediaURL:[],thumbnailURL:"",location:"",geoPoint:"",reference:[],additionalInformation:"",dataObject:""}}},dispersalUnstructured:"",ancillaryData:[]},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.dispersal",[]).controller("DispersalCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.reference),i=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addDispersal=function(){""!==e.formData.dispersal.dispersalUnstructured&&console.log("enviar cambios")},e.removeDispersalAtomized=function(a,n){e.dispersalFactoryLocal["delete"](a,n)},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=i,i=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryDispersal").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseDispersal").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryDispersal").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryDispersal").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=r,r=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(r),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.behavior",[]).factory("BehaviorFactory",function(){return function(){this.behavior={behaviorAtomized:[],behaviorUnstructured:"",ancillaryData:[]},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.behavior",[]).controller("BehaviorCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.reference),i=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addBehavior=function(){""!==e.formData.behavior.behaviorUnstructured&&console.log("enviar cambios")},e.removeBehaviorAtomized=function(a,n){e.behaviorFactoryLocal["delete"](a,n)},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=i,i=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryBehavior").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseBehavior").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryBehavior").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryBehavior").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=r,r=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.index_reference=t,e.reference=angular.copy(n),e.checked=!e.checked},e.cancelReference=function(){e.reference=angular.copy(r),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.annualCycle",[]).factory("AnnualCycleFactory",function(){return function(){this.annualCycleAtomizedType={Event:"",startTimeInterval:"",endTimeInterval:"",ancillaryData:[]},this.annualCycle={annualCycleAtomized:[],annualCycleUnstructured:"",ancillaryData:[]},this.add=function(e,a){e.push(a)}}}),angular.module("app.controllers.annualCycle",[]).controller("AnnualCyclesCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){e.annualCycleAtomizedType=e.annualCycleFactoryLocal.annualCycleAtomizedType;var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference,e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido);var r=angular.copy(e.annualCycleAtomizedType),i=angular.copy(e.reference),l=angular.copy(e.ancillaryData);e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addAnnualCycleAtomizedType=function(a,n){JSON.stringify(a)!==JSON.stringify(r)&&(e.annualCycleFactoryLocal.add(a,n),e.annualCycleAtomizedType=r,r=angular.copy(e.annualCycleAtomizedType))},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=l,l=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary=""}},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.ancillaryData=angular.copy(n),e.index_ancillary=t},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=i,i=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(i),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.habitat",[]).factory("HabitatsFactory",function(){return function(){this.habitat={habitatAtomized:[],habitatUnstructured:"",ancillaryData:[]},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.habitat",[]).controller("HabitatsCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.reference),i=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addHabitat=function(){""!==e.formData.habitat.habitatUnstructured&&console.log("enviar cambios")},e.removeHabitatAtomized=function(a,n){e.habitatsFactoryLocal["delete"](a,n)},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=i,i=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryHabitat").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseHabitat").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryHabitat").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryHabitat").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=r,r=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(r),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.endemic",[]).factory("EndemicFactory",function(){return function(){this.endemicAtomizedType={endemicTo:[],endemicIn:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.endemic",[]).controller("EndemicCtrl",["$scope","ReferenceFactory","AncillaryDataFactory","EndemicFactory",function(e,a,n,t){var c=new t;e.endemicTo="",e.endemicAtomizedType=c.endemicAtomizedType;var r=new n;e.ancillaryData=r.ancillaryData;var i=new a;e.reference=i.reference;var l=angular.copy(e.endemicAtomizedType),o=angular.copy(e.reference),s=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_endemic="",e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addEndemic=function(a,n){JSON.stringify(n)!==JSON.stringify(l)&&(""!==e.index_endemic?a[e.index_endemic]=angular.copy(n):c.add(a,n),e.endemicAtomizedType=l,l=angular.copy(e.endemicAtomizedType),e.index_endemic="")},e.removeEndemic=function(e,a){c["delete"](e,a)},e.editEndemic=function(a,n,t){e.index_endemic=t,e.endemicAtomizedType=angular.copy(n)},e.addEndemicTo=function(a,n){""!==n&&(a.push(n),e.endemicTo="")},e.removeEndemicTo=function(e,a){var n=e.indexOf(a);e.splice(n,1)},e.addAncillaryData=function(a,n){if(""!==n.license){var t=document.getElementById("ancillaryData.license");void 0!==t&&null!==t&&(n.license=t.value),r.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){i.addTo(e.formData.references,a)}),e.ancillaryData=s,s=angular.copy(e.ancillaryData),e.resetLicenseList(t,e.lincese_list),e.index_ancillary="",$("#ancillaryEndemic").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){r.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseEndemic").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryEndemic").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(s);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryEndemic").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(i.addTo(a,n,e.index_reference),e.reference=o,o=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){i.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(o),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.distribution",[]).factory("DistributionFactory",function(){return function(){this.distributionOpt2={country:"Colombia",stateProvince:"",county:"",municipality:"",locality:"",ancillaryData:[]},this.distributionClass={distributionScope:{type:"",ancillaryData:[]},temporalCoverage:{startDate:"",endDate:""},distributionAtomized:[],distributionUnstructured:"",ancillaryData:[]},this.addClass=function(e,a){e.push(a)},this.deleteClass=function(e,a){var n=e.indexOf(a);e.splice(n,1)},this.addOpt2=function(e,a){e.push(a)},this.deleteOpt2=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.distribution",[]).controller("DistributionCtrl",["$scope","ReferenceFactory","AncillaryDataFactory","DistributionFactory",function(e,a,n,t){var c=new t;e.distributionOpt2=c.distributionOpt2,e.distributionClass=c.distributionClass;var r=new n;e.ancillaryData=r.ancillaryData;var i=new a;e.reference=i.reference;var l=angular.copy(e.distributionOpt2),o=angular.copy(e.distributionClass),s=angular.copy(e.reference),d=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_distributionOpt="",e.index_distribution="",e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addDistributionOpt2=function(a,n){JSON.stringify(n)!==JSON.stringify(l)&&("TODOS"===n.stateProvince?angular.forEach(e.ubicacion,function(e){e.countryName===n.country&&angular.forEach(e.departments,function(n){if("TODOS"!==n.departmentName){var t={country:e.countryName,stateProvince:n.departmentName,county:"",municipality:"",locality:"",ancillaryData:[]};c.addOpt2(a,t)}})}):""!==e.index_distributionOpt?a[e.index_distributionOpt]=angular.copy(n):c.addOpt2(a,n),e.distributionOpt2=l,l=angular.copy(e.distributionOpt2),e.index_distributionOpt="")},e.editDistributionOpt2=function(a,n,t){e.index_distributionOpt=t,e.distributionOpt2=angular.copy(n)},e.removeDistributionOpt2=function(e,a){c.deleteOpt2(e,a)},e.addDistribution=function(a,n){JSON.stringify(n)!==JSON.stringify(o)&&(""!==e.index_distribution?a[e.index_distribution]=angular.copy(n):c.addClass(a,n),e.distributionClass=o,o=angular.copy(e.distributionClass),angular.forEach(e.lenguajes.distributionScope,function(e){e.checked=!1}),e.index_distribution="")},e.removeDistribution=function(e,a){c.deleteClass(e,a)},e.editDistribution=function(a,n,t){e.index_distribution=t,e.distributionClass=angular.copy(n),angular.forEach(e.lenguajes.distributionScope,function(e){e.name===n.distributionScope.type&&(e.checked=!0)})},e.addAncillaryData=function(a,n){if(""!==n.license){var t=document.getElementById("ancillaryData.license");void 0!==t&&null!==t&&(n.license=t.value),r.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){i.addTo(e.formData.references,a)}),e.ancillaryData=d,d=angular.copy(e.ancillaryData),e.resetLicenseList(t,e.lincese_list),e.index_ancillary="",$("#ancillaryDistribution").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){r.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseDistribution").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryDistribution").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(d);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryDistribution").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(i.addTo(a,n,e.index_reference),e.reference=s,s=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){i.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(s),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.controllers.upload",[]).controller("UploadFile",function(e){e.replaceSC=function(e){var a=e.replace(/\\'{\\i/g,"í").replace(/\\'{I/g,"Í").replace(/\\'\\i/g,"í").replace(/\\'\\I/g,"Í"),n=a.replace(/\\'{o/g,"ó").replace(/\\'{O/g,"Ó").replace(/\\'o/g,"ó").replace(/\\'O/g,"Ó"),t=n.replace(/\\'{u/g,"ú").replace(/\\'{U/g,"Ú").replace(/\\'u/g,"ú").replace(/\\'U/g,"Ú"),c=t.replace(/\\'{a/g,"á").replace(/\\'{A/g,"Á").replace(/\\'a/g,"á").replace(/\\'A/g,"Á"),r=c.replace(/\\'{e/g,"é").replace(/\\'{E/g,"É").replace(/\\'e/g,"é").replace(/\\'E/g,"É"),i=r.replace(/\\~{n/g,"ñ").replace(/\\~{N/g,"Ñ").replace(/\\~n/g,"ñ").replace(/\\~N/g,"Ñ"),l=i.replace(/{/g,""),o=l.replace(/}/g,"");return o},e.showContent=function(a){e.content=a;var n=bibtexParse.toJSON(e.content);angular.forEach(n,function(a){var n={id:"",profile_id:"",group_id:"",created:"",last_modified:"",identifiers:[],"abstract":"",tags:"",type:"",source:"",title:"",authors:[],year:"",volume:"",issue:"",pages:"",series:"",chapter:"",websites:"",accessed:"",publisher:"",address:"",edition:"",institution:"",editors:[],keywords:[],doi:"",isbn:"",issn:"",link:""};if(n.doi=a.entryTags.doi,n.issn=a.entryTags.issn,n.isbn=a.entryTags.isbn,n.pages=a.entryTags.pages,n.year=a.entryTags.year,n.edition=a.entryTags.edition,n.volume=a.entryTags.volume,n.pages=a.entryTags.pages,n.link=a.entryTags.url,void 0!==a.entryTags.title?n.title=e.replaceSC(a.entryTags.title):n.title="",void 0!==a.entryTags.keywords?n.keywords=e.replaceSC(a.entryTags.keywords):n.keywords="",void 0!==a.entryTags["mendeley-tags"]?n.tags=e.replaceSC(a.entryTags["mendeley-tags"]):n.tags="",void 0!==a.entryTags.publisher?n.publisher=e.replaceSC(a.entryTags.publisher):n.publisher="",void 0!==a.entryTags.issue?n.issue=e.replaceSC(a.entryTags.annote):n.issue="",void 0!==a.entryTags["abstract"]?n["abstract"]=e.replaceSC(a.entryTags["abstract"]):n["abstract"]="",void 0!==a.entryTags.author){var t=e.replaceSC(a.entryTags.author);t.indexOf("and")>-1?n.authors=t.split(" and "):n.authors=[].concat(t)}if(void 0!==a.entryTags.editor){var c=e.replaceSC(a.entryTags.editor);c.indexOf("and")>-1?n.editors=c.split(" and "):n.editors=[].concat(c)}switch(a.entryType){case"book":n.type=a.entryType;break;case"misc":n.type="miscellany",void 0!==a.entryTags.booktitle?n.source=e.replaceSC(a.entryTags.booktitle):n.source="";break;case"incollection":n.type="book_section",void 0!==a.entryTags.booktitle?n.source=e.replaceSC(a.entryTags.booktitle):n.source="";break;case"article":n.type=a.entryType,void 0!==a.entryTags.journal?n.source=e.replaceSC(a.entryTags.journal):n.source="";break;case"phdthesis":n.type="thesis",void 0!==a.entryTags.school?n.institution=e.replaceSC(a.entryTags.school):n.institution="";break;case"techreport":n.type="report",void 0!==a.entryTags.institution?n.institution=e.replaceSC(a.entryTags.institution):n.institution="";break;case"inproceedings":n.type="conference_proceedings",void 0!==a.entryTags.booktitle?n.source=e.replaceSC(a.entryTags.booktitle):n.source="",void 0!==a.entryTags.organization?n.institution=e.replaceSC(a.entryTags.organization):n.institution="";break;case"unpublished":n.type="working_paper",void 0!==a.entryTags.school?n.institution=e.replaceSC(a.entryTags.school):n.institution=""}e.formData.references.push(n)})}}).directive("onReadFile",function(e){return{restrict:"A",scope:!1,link:function(a,n,t){var c=e(t.onReadFile);n.on("change",function(e){var n=new FileReader;n.onload=function(e){a.$apply(function(){c(a,{$fileContent:e.target.result})})},n.readAsText((e.srcElement||e.target).files[0])})}}}),angular.module("app.controllers.ubicacion",[]).controller("UbicacionCtrl",["$scope",function(e){e.$watch("distributionOpt2.country",function(a){void 0!==a&&(delete e.distributionOpt2.stateProvince,delete e.distributionOpt2.county,angular.forEach(e.ubicacion,function(n){n.countryName===a&&(e.selectedAttr=n)}))}),e.$watch("distributionOpt2.stateProvince",function(a){void 0!==a&&(delete e.distributionOpt2.county,angular.forEach(e.ubicacion,function(n){angular.forEach(n.departments,function(n){n.departmentName===a&&(e.selectedAttr2=n)})}))}),e.$watch("invasivenessAtomizedType.countryCode",function(a){void 0!==a&&(e.invasivenessAtomizedType.stateProvince="",e.invasivenessAtomizedType.county="",angular.forEach(e.ubicacion,function(n){n.countryName===a&&("Colombia"===n.countryName&&34===n.departments.length&&n.departments.splice(0,1),e.selectedAttr=n)}))}),e.$watch("invasivenessAtomizedType.stateProvince",function(a){void 0!==a&&(e.invasivenessAtomizedType.county="",angular.forEach(e.ubicacion,function(n){angular.forEach(n.departments,function(n){n.departmentName===a&&(e.selectedAttr2=n)})}))}),e.$watch("threatStatusClass.threatStatusAtomized.appliesTo.country",function(a){void 0!==a&&(e.threatStatusClass.threatStatusAtomized.appliesTo.stateProvince="",e.threatStatusClass.threatStatusAtomized.appliesTo.county="",angular.forEach(e.ubicacion,function(n){n.countryName===a&&("Colombia"===n.countryName&&34===n.departments.length&&n.departments.splice(0,1),e.selectedAttr=n)}))}),e.$watch("threatStatusClass.threatStatusAtomized.appliesTo.stateProvince",function(a){void 0!==a&&(e.threatStatusClass.threatStatusAtomized.appliesTo.county="",angular.forEach(e.ubicacion,function(n){angular.forEach(n.departments,function(n){n.departmentName===a&&(e.selectedAttr2=n)})}))}),e.$watch("legislationAtomizedType.appliesTo.country",function(a){void 0!==a&&(e.legislationAtomizedType.appliesTo.stateProvince="",e.legislationAtomizedType.appliesTo.county="",angular.forEach(e.ubicacion,function(n){n.countryName===a&&("Colombia"===n.countryName&&34===n.departments.length&&n.departments.splice(0,1),e.selectedAttr=n)}))}),e.$watch("legislationAtomizedType.appliesTo.stateProvince",function(a){void 0!==a&&(e.legislationAtomizedType.appliesTo.county="",angular.forEach(e.ubicacion,function(n){
angular.forEach(n.departments,function(n){n.departmentName===a&&(e.selectedAttr2=n)})}))}),e.$watch("associatedParty.country",function(a){void 0!==a&&(e.associatedParty.state="",e.associatedParty.city="",angular.forEach(e.ubicacion,function(n){n.countryName===a&&("Colombia"===n.countryName&&34===n.departments.length&&n.departments.splice(0,1),e.selectedAttr=n)}))}),e.$watch("associatedParty.state",function(a){void 0!==a&&(e.associatedParty.city="",angular.forEach(e.ubicacion,function(n){angular.forEach(n.departments,function(n){n.departmentName===a&&(e.selectedAttr2=n)})}))})}]),angular.module("app.routes.translate",["pascalprecht.translate","ngSanitize","ngCookies"]).config(function(e){e.useStaticFilesLoader({prefix:"/../../i18n/",suffix:".json"}),e.useLocalStorage(),e.preferredLanguage("es_CO"),e.useSanitizeValueStrategy("sanitizeParameters")}),angular.module("app.routes",["ui.router"]).config(function(e,a){e.state("form",{url:"/form",templateUrl:"form.html",controller:"formController"}).state("form.metaData",{url:"/metaData",templateUrl:"form/metaData.html"}).state("form.baseElem",{url:"/baseElem",templateUrl:"form/baseElem.html"}).state("form.recordMeta",{url:"/recordMeta",templateUrl:"form/recordMeta.html"}).state("form.nomeAndClass",{url:"/nomeAndClass",templateUrl:"form/nomeAndClass.html"}).state("form.taxoDesc",{url:"/taxoDesc",templateUrl:"form/taxoDesc.html"}).state("form.history",{url:"/history",templateUrl:"form/history.html"}).state("form.historyC",{url:"/historyC",templateUrl:"form/historyC.html"}).state("form.invasiveness",{url:"/invasiveness",templateUrl:"form/invasiveness.html"}).state("form.habitat",{url:"/habitat",templateUrl:"form/habitat.html"}).state("form.demogra",{url:"/demogra",templateUrl:"form/demogra.html"}).state("form.uses",{url:"/uses",templateUrl:"form/uses.html"}).state("form.references",{url:"/references",templateUrl:"form/references.html"}).state("form.ancillary",{url:"/ancillary",templateUrl:"form/ancillary.html"}).state("form.associatedParty",{url:"/associatedParty",templateUrl:"form/associatedParty.html"}),a.otherwise("/form/nomeAndClass")}),angular.module("app.controllers.pageSlide",[]).controller("PageSlideCtrl",["$scope",function(e){e.checked=!1,e.slide=function(){e.checked=!e.checked}}]),angular.module("app.controllers.modal",[]).controller("ModalCtrl",function(e,a){e.animationsEnabled=!0,e.open=function(n,t){var c=a.open({animation:e.animationsEnabled,templateUrl:"referenceSearch",controller:"ModalInstanceCtrl",resolve:{items:function(){return n},list:function(){return t}}});c.result.then(function(){},function(){})},e.toggleAnimation=function(){e.animationsEnabled=!e.animationsEnabled}}).controller("ModalInstanceCtrl",function(e,a,n,t){e.items=n,e.list=t,e.toggleSelection=function(e){var a=t.indexOf(e);a>-1?t.splice(a,1):t.push(e)},e.ok=function(){e.items="",a.close(t)},e.cancel=function(){e.items="",a.dismiss("cancel")}}),angular.module("app.services.measurement",[]).factory("MeasurementFactory",function(){return function(){this.measurement={measurementOrFact:{measurementID:"",measurementType:"",measurementValue:"",measurementAccuracy:"",measurementUnit:"",measurementDeterminedDate:"",measurementDeterminedBy:[],measurementMethod:"",measurementRemarks:"",relatedTo:""},ancillaryData:{identifier:"",dataType:"",mimeType:"",agent:[],created:"",modified:"",license:"",rights:"",rightsHolder:"",bibliographicCitation:"",audience:[],source:"",subject:[],description:"",mediaURL:[],thumbnailURL:"",location:"",geoPoint:"",reference:[],additionalInformation:"",dataObject:""}},this.addMeasurementOrFactVector=function(e,a){e.push({measurementOrFact:a.measurementOrFact,ancillaryData:a.ancillaryData})},this.addMeasurementOrFact=function(e,a){e={measurementOrFact:a.measurementOrFact,ancillaryData:a.ancillaryData}}}}),angular.module("app.controllers.measurement",[]).controller("MeasurementCtrl",["$scope","MeasurementFactory",function(e,a){var n;e.$watch("lifeFormAtomized.measurementType",function(a){void 0!==a&&(delete e.lifeFormAtomized.measurementValue,e.selectedAttr.length=0,angular.forEach(e.lenguajes.lifeForms,function(n){n.measurementtype===a&&e.selectedAttr.push(n)}))}),e.$watch("lifeFormAtomized.measurementValue",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),angular.forEach(e.selectedAttr,function(a){a.measurementvalue===t&&(e.measurementOrFact.measurementOrFact.measurementType=a.measurementtype,e.measurementOrFact.measurementOrFact.measurementValue=t,e.measurementOrFact.ancillaryData.bibliographicCitation=a.referencia,e.measurementOrFact.ancillaryData.source=a.url)}))}),e.$watch("lifeCycleAtomized.measurementType",function(a){void 0!==a&&(delete e.lifeCycleAtomized.measurementValue,e.selectedAttr.length=0,angular.forEach(e.lenguajes.lifeCycles,function(n){n.measurementtype===a&&e.selectedAttr.push(n)}))}),e.$watch("lifeCycleAtomized.measurementValue",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),angular.forEach(e.selectedAttr,function(a){a.measurementvalue===t&&(e.measurementOrFact.measurementOrFact.measurementType=a.measurementtype,e.measurementOrFact.measurementOrFact.measurementValue=t,e.measurementOrFact.ancillaryData.bibliographicCitation=a.referencia,e.measurementOrFact.ancillaryData.source=a.url)}))}),e.$watch("reproductionAtomized.measurementType",function(a){void 0!==a&&(delete e.reproductionAtomized.measurementValue,e.selectedAttr_2.length=0,angular.forEach(e.lenguajes.reproduction,function(n){n.measurementtype===a&&e.selectedAttr_2.push(n)}))}),e.$watch("reproductionAtomized.measurementValue",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),angular.forEach(e.selectedAttr_2,function(a){a.measurementvalue===t&&(e.measurementOrFact.measurementOrFact.measurementType=a.measurementtype,e.measurementOrFact.measurementOrFact.measurementValue=t,e.measurementOrFact.measurementOrFact.measurementDeterminedBy=a.measurementdeterminedby,e.measurementOrFact.ancillaryData.bibliographicCitation=a.referencia,e.measurementOrFact.ancillaryData.source=a.url)}))}),e.$watch("dispersalAtomized.purpose.measurementType",function(a){void 0!==a&&(delete e.dispersalAtomized.purpose.measurementValue,e.selectedAttr.length=0,angular.forEach(e.lenguajes.purposes,function(n){n.measurementtype===a&&e.selectedAttr.push(n)}))}),e.$watch("dispersalAtomized.purpose.measurementValue",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),angular.forEach(e.selectedAttr,function(a){a.measurementvalue===t&&(e.measurementOrFact.measurementOrFact.measurementType=a.measurementtype,e.measurementOrFact.measurementOrFact.measurementValue=t,e.measurementOrFact.ancillaryData.bibliographicCitation=a.referencia,e.measurementOrFact.ancillaryData.source=a.url)}))}),e.$watch("formData.dispersal.dispersalAtomized.distance.measurementOrFact.measurementType",function(a){void 0!==a&&(delete e.formData.dispersal.dispersalAtomized.distance.measurementValue,e.selectedAttr.length=0,angular.forEach(e.lenguajes.distance,function(n){n.measurementtype===a&&e.selectedAttr.push(n)}))}),e.$watch("formData.dispersal.dispersalAtomized.distance.measurementOrFact.measurementValue",function(a){void 0!==a&&angular.forEach(e.selectedAttr,function(n){n.measurementvalue===a&&(e.formData.dispersal.dispersalAtomized.distance.measurementOrFact.measurementType=n.measurementtype,e.formData.dispersal.dispersalAtomized.distance.measurementOrFact.measurementValue=a,e.formData.dispersal.dispersalAtomized.distance.ancillaryData.bibliographicCitation=n.referencia,e.formData.dispersal.dispersalAtomized.distance.ancillaryData.source=n.url)})}),e.$watch("behaviorAtomized.measurementType",function(a){void 0!==a&&(delete e.behaviorAtomized.measurementValue,e.selectedAttr.length=0,angular.forEach(e.lenguajes.behaviors,function(n){n.measurementtype===a&&e.selectedAttr.push(n)}))}),e.$watch("behaviorAtomized.measurementValue",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),angular.forEach(e.selectedAttr,function(a){a.measurementvalue===t&&(e.measurementOrFact.measurementOrFact.measurementType=a.measurementtype,e.measurementOrFact.measurementOrFact.measurementValue=t,e.measurementOrFact.ancillaryData.bibliographicCitation=a.referencia,e.measurementOrFact.ancillaryData.source=a.url)}))}),e.$watch("molecularDataAtomizedType.measurementOrFact.measurementType",function(a){void 0!==a&&(delete e.molecularDataAtomizedType.measurementOrFact.measurementValue,e.selectedAttr.length=0,angular.forEach(e.lenguajes.molecularData,function(n){n.measurementtype===a&&e.selectedAttr.push(n)}))}),e.$watch("molecularDataAtomizedType.measurementOrFact.measurementValue",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),angular.forEach(e.selectedAttr,function(a){a.measurementvalue===t&&(e.molecularDataAtomizedType.measurementOrFact.measurementOrFact.measurementType=a.measurementtype,e.molecularDataAtomizedType.measurementOrFact.measurementOrFact.measurementValue=t,e.molecularDataAtomizedType.measurementOrFact.ancillaryData.bibliographicCitation=a.referencia,e.molecularDataAtomizedType.measurementOrFact.ancillaryData.source=a.url)}))}),e.$watch("interactionsAtomizedType.interactionSpeciesType.measurementOrFact.measurementType",function(a){void 0!==a&&(delete e.interactionsAtomizedType.interactionSpeciesType.measurementOrFact.measurementValue,e.selectedAttr_2.length=0,angular.forEach(e.lenguajes.interactionSpeciesType,function(n){n.measurementtype===a&&e.selectedAttr_2.push(n)}))}),e.$watch("interactionsAtomizedType.interactionSpeciesType.measurementOrFact.measurementValue",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),angular.forEach(e.selectedAttr_2,function(a){a.measurementvalue===t&&(e.measurementOrFact.measurementOrFact.measurementType=a.measurementtype,e.measurementOrFact.measurementOrFact.measurementValue=t,e.measurementOrFact.ancillaryData.bibliographicCitation=a.referencia,e.measurementOrFact.ancillaryData.source=a.url)}))}),e.$watch("environmentalEnvelopeAtomized.measurementOrFact.measurementType",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),angular.forEach(e.lenguajes.environmentalEnvelopes,function(a){a.measurementtype===t&&(e.measurementOrFact.measurementOrFact.measurementType=t,e.measurementOrFact.measurementOrFact.measurementUnit=a.measurementunit,e.measurementOrFact.ancillaryData.bibliographicCitation=a.referencia,e.measurementOrFact.ancillaryData.source=a.url)}))}),e.$watch("ecologicalSignificanceAtomized.measurementOrFact.measurementType",function(a){void 0!==a&&(delete e.ecologicalSignificanceAtomized.measurementOrFact.measurementValue,e.selectedAttr_3.length=0,angular.forEach(e.lenguajes.ecologicalSignificances,function(n){n.measurementtype===a&&e.selectedAttr_3.push(n)}))}),e.$watch("ecologicalSignificanceAtomized.measurementOrFact.measurementValue",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),angular.forEach(e.selectedAttr_3,function(a){a.measurementvalue===t&&(e.measurementOrFact.measurementOrFact.measurementType=a.measurementtype,e.measurementOrFact.measurementOrFact.measurementValue=t,e.measurementOrFact.ancillaryData.bibliographicCitation=a.referencia,e.measurementOrFact.ancillaryData.source=a.url)}))}),e.$watch("habitatAtomized.measurementType",function(a){void 0!==a&&(delete e.habitatAtomized.measurementValue,e.selectedAttr.length=0,angular.forEach(e.lenguajes.habitat,function(n){n.measurementtype===a&&e.selectedAttr.push(n)}))}),e.$watch("habitatAtomized.measurementValue",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),angular.forEach(e.selectedAttr,function(a){a.measurementvalue===t&&(e.measurementOrFact.measurementOrFact.measurementType=a.measurementtype,e.measurementOrFact.measurementOrFact.measurementValue=t,e.measurementOrFact.ancillaryData.bibliographicCitation=a.referencia,e.measurementOrFact.ancillaryData.source=a.url)}))}),e.$watch("territoryAtomized.extentOfOccurrence.measurementType",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),e.measurementOrFact.measurementType=t,e.measurementOrFact.measurementValue=e.territoryAtomized.extentOfOccurrence.measurementValue)}),e.$watch("territoryAtomized.areaOfOccupancy.measurementType",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),e.measurementOrFact.measurementType=t,e.measurementOrFact.measurementValue=e.territoryAtomized.areaOfOccupancy.measurementValue)}),e.$watch("directThreatsAtomized.measurementOrFact.measurementType",function(a){void 0!==a&&(delete e.directThreatsAtomized.measurementOrFact.measurementValue,e.selectedAttr_2.length=0,angular.forEach(e.lenguajes.directThreats,function(n){n.measurementtype===a&&e.selectedAttr_2.push(n)}))}),e.$watch("directThreatsAtomized.measurementOrFact.measurementValue",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),angular.forEach(e.selectedAttr_2,function(a){a.measurementvalue===t&&(e.measurementOrFact.measurementOrFact.measurementType=a.measurementtype,e.measurementOrFact.measurementOrFact.measurementValue=t,e.measurementOrFact.ancillaryData.bibliographicCitation=a.referencia,e.measurementOrFact.ancillaryData.source=a.url)}))}),e.$watch("managementAction.measurementType",function(a){void 0!==a&&(delete e.managementAction.measurementValue,e.selectedAttr.length=0,angular.forEach(e.lenguajes.managementAction,function(n){n.measurementtype===a&&e.selectedAttr.push(n)}))}),e.$watch("managementAction.measurementValue",function(t){void 0!==t&&(e.measurementOrFact=(new a).measurement,n=angular.copy(e.measurementOrFact),angular.forEach(e.selectedAttr,function(a){a.measurementvalue===t&&(e.measurementOrFact.measurementOrFact.measurementType=a.measurementtype,e.measurementOrFact.measurementOrFact.measurementValue=t,e.measurementOrFact.ancillaryData.bibliographicCitation=a.referencia,e.measurementOrFact.ancillaryData.source=a.url)}))}),e.$watch("threatStatusClass.threatStatusAtomized.threatCategory.measurementType",function(a){void 0!==a&&(delete e.threatStatusClass.threatStatusAtomized.threatCategory.measurementValue,e.selectedAttr.length=0,angular.forEach(e.lenguajes.threatCategory,function(n){n.measurementtype===a&&e.selectedAttr.push(n)}))}),e.$watch("threatStatusClass.threatStatusAtomized.threatCategory.measurementValue",function(a){void 0!==a&&angular.forEach(e.selectedAttr,function(n){n.measurementvalue===a&&(e.threatStatusClass.threatStatusAtomized.threatCategory.measurementType=n.measurementtype,e.threatStatusClass.threatStatusAtomized.threatCategory.measurementValue=a)})}),e.addMeasurementOrFactVector=function(a,t){void 0!==t&&""!==t.measurementOrFact.measurementValue&&(a.push({measurementOrFact:t.measurementOrFact,ancillaryData:t.ancillaryData}),e.measurementOrFact=angular.copy(n),n=angular.copy(e.measurementOrFact))},e.addMeasurementOrFact=function(a,t){void 0!==t&&""!==t.measurementOrFact.measurementValue&&(a.measurementOrFact=angular.copy(t.measurementOrFact),a.ancillaryData=angular.copy(t.ancillaryData),e.measurementOrFact=angular.copy(n),n=angular.copy(e.measurementOrFact))}}]),angular.module("app.services.form",[]).factory("FormFactory",["$resource",function(e){return e("http://192.168.205.12:3000/get-record/:id",{id:"@id"})}]),angular.module("app.controllers.form",[]).controller("formController",["$timeout","$scope","$http","$rootScope","$routeParams","$resource","$location","DirectThreatsFactory","LegislationFactory","PopulationBiologyFactory","TerritoryFactory","HabitatsFactory","AnnualCycleFactory","BehaviorFactory","DispersalFactory","EcologicalSignificanceFactory","EnvironmentalEnvelopeFactory","FeedingFactory","InteractionsFactory","LifeCycleFactory","LifeFormFactory","MigratoryFactory","MolecularDataFactory","ReproductionFactory","InvasivenessFactory","TaxonRecordNameFactory","FullDescriptionFactory","IdentificationKeysFactory","ManagementAndConservationAtomizedFactory",function(e,a,n,t,c,r,i,l,o,s,d,u,m,y,f,p,g,h,v,D,A,k,_,b,x,E,T,F,C){a.annualCycleFactoryLocal=new m,a.behaviorFactoryLocal=new y,a.directThreatsFactoryLocal=new l,a.dispersalFactoryLocal=new f,a.ecologicalSignificanceFactoryLocal=new p,a.environmentalEnvelopeFactoryLocal=new g,a.feedingFactoryLocal=new h,a.fullDescriptionFactoryLocal=new T,a.habitatsFactoryLocal=new u,a.identificationKeysFactoryLocal=new F,a.interactionsFactoryLocal=new v,a.invasivenessFactoryLocal=new x,a.legislationFactoryLocal=new o,a.lifeCycleFactoryLocal=new D,a.lifeFormFactoryLocal=new A,a.managementAndConservationAtomizedFactoryLocal=new C,a.migratoryFactoryLocal=new k,a.molecularDataFactoryLocal=new _,a.populationBiologyFactoryLocal=new s,a.reproductionFactoryLocal=new b,a.taxonRecordNameFactoryLocal=new E,a.territoryFactoryLocal=new d,void 0!==a.formDataGet?(a.formData=a.formDataGet,void 0!==a.formData.dispersal&&(angular.forEach(a.lenguajes.dispersalType,function(e){null!==a.formData.dispersal.dispersalAtomized.type&&a.formData.dispersal.dispersalAtomized.type===e.name&&(e.checked=!0)}),angular.forEach(a.lenguajes.structureDispersed,function(e){null!==a.formData.dispersal.dispersalAtomized.structureDispersed&&a.formData.dispersal.dispersalAtomized.structureDispersed===e.name&&(e.checked=!0)}))):a.formData={ancillaryData:[],associatedParty:[],"abstract":"",moreInformation:"",directThreats:a.directThreatsFactoryLocal.directThreats,legislation:a.legislationFactoryLocal.legislation,populationBiology:a.populationBiologyFactoryLocal.populationBiology,territory:a.territoryFactoryLocal.territory,threatStatus:[],distribution:[],endemicAtomized:[],habitat:a.habitatsFactoryLocal.habitat,annualCycle:a.annualCycleFactoryLocal.annualCycle,behavior:a.behaviorFactoryLocal.behavior,dispersal:a.dispersalFactoryLocal.dispersal,ecologicalSignificance:a.ecologicalSignificanceFactoryLocal.ecologicalSignificance,environmentalEnvelope:a.environmentalEnvelopeFactoryLocal.environmentalEnvelope,feeding:a.feedingFactoryLocal.feeding,interactions:a.interactionsFactoryLocal.interactions,lifeCycle:a.lifeCycleFactoryLocal.lifeCycle,lifeForm:a.lifeFormFactoryLocal.lifeForm,migratory:a.migratoryFactoryLocal.migratory,molecularData:a.molecularDataFactoryLocal.molecularData,reproduction:a.reproductionFactoryLocal.reproduction,invasiveness:a.invasivenessFactoryLocal.invasiveness,commonNameAtomized:[],hierarchy:[],synonymsAtomized:[],taxonRecordName:a.taxonRecordNameFactoryLocal.taxonRecordName,references:[],briefDescription:"",fullDescription:a.fullDescriptionFactoryLocal.fullDescription,identificationKeys:a.identificationKeysFactoryLocal.identificationKeys,usesManagementAndConservation:a.managementAndConservationAtomizedFactoryLocal.usesManagementAndConservation},n.get("/resources/distribution.json").then(function(e){a.ubicacion=e.data}),a.ubicacion_appliesTo=[{countryName:"Colombia",countryIso:"CO"},{countryName:"Global",countryIso:"GLO"}],n.get("/resources/language.json").then(function(e){a.idiomas=e.data}),void 0!==a.lenguajes&&(void 0!==a.lenguajes.event&&(a.event=a.lenguajes.event),void 0!==a.lenguajes.distance&&(a.distance=a.lenguajes.distance),void 0!==a.lenguajes.partUsed&&(a.partUsed=a.lenguajes.partUsed)),a.selectedAttr=[],a.selectedAttr_2=[],a.selectedAttr_3=[],a.date=new Date,a.resetLicenseList=function(e,a){void 0!==e&&null!==e&&e.parentNode.removeChild(e),angular.forEach(a,function(e){"Atribución - No Comercial - Compartir igual (CC BY-NC-SA 4.0)"===e.nombre?e.checked=!0:e.checked=!1})},a.saveFile=function(){if(void 0!==a.formData.taxonRecordName.scientificName.simple&&""!==a.formData.taxonRecordName.scientificName.simple)if(void 0!==a.formData._id){var e=a.formData._id,t={method:"PUT",url:"http://apimamut.elasticbeanstalk.com/update-record/"+e,headers:{"Content-Type":"application/JSON"},data:a.formData};n(t).then(function(e){"Record update!"===e.data.message&&console.log("La ficha se ha actualizado")})}else{a.formData.creation_date=new Date;var c={method:"POST",url:"http://apimamut.elasticbeanstalk.com/post-record",headers:{"Content-Type":"application/JSON"},data:a.formData};n(c).then(function(e){"Record created!"===e.data.message&&(a.formData._id=e.data.id,alert("Su ficha se ha creado correctamente"))})}};setInterval(function(){a.saveFile()},2e4);$("#btnNext").click(function(){$(".nav-pills.nav-stacked.col-md-2 > .active").next("li").find("a").trigger("click")})}]).filter("empty_vectors",function(){return function(e){return 0===e.length&&(e=""),e}}).filter("split",function(){return function(e,a,n){return e.split(a)[n]}}).filter("references_translate",function(){return function(e,a){return angular.forEach(a.lenguajes.reference_type,function(a){null!==e&&e===a.original&&(e=a.view)}),e}}).filter("references_format",function(){return function(e){var a="",n="";e.authors=[].concat(e.authors),n+=1===e.authors.length?e.authors:2===e.authors.length?e.authors[0]+" & "+e.authors[1]:3===e.authors.length?e.authors[0]+" , "+e.authors[1]+" & "+e.authors[2]:e.authors[0]+" et al. ";var t="";e.editors=[].concat(e.editors),t+=1===e.editors.length?e.editors+" (ed.)":2===e.editors.length?e.editors[0]+" & "+e.editors[1]+" (eds.)":3===e.editors.length?e.editors[0]+" , "+e.editors[1]+" & "+e.editors[2]+" (eds.)":e.editors[0]+"et al. (eds.)";var c="";c=void 0!==e.year&&""!==e.year?" ("+e.year+"). ":"(S.F.)";var r="";void 0!==e.title&&""!==e.title&&(r=e.title+". ");var i="";void 0!==e.series&&""!==e.series&&(i=e.series);var l="";void 0!==e.chapter&&""!==e.chapter&&(l=e.chapter);var o="";void 0!==e.volume&&""!==e.volume&&(o=" Vol. "+e.volume+". ");var s="";void 0!==e.pages&&""!==e.pages&&(s=e.pages+". ");var d="";void 0!==e.edition&&""!==e.edition&&(d=e.edition+". ");var u="";void 0!==e.address&&""!==e.address&&(u=e.address+": ");var m="";void 0!==e.publisher&&""!==e.publisher&&(m=e.publisher+". ");var y="";void 0!==e.link&&""!==e.link&&(y="Disponible en: "+e.link);var f="";void 0!==e.doi&&""!==e.doi&&(f="Disponible en: "+e.doi);var p="";void 0!==e.accessed&&""!==e.accessed&&(p="[ Consultado"+e.accessed+"].");var g="";void 0!==e.isbn&&""!==e.isbn&&(g=e.isbn);var h="";void 0!==e.issn&&""!==e.issn&&(h=e.issn);var v="";void 0!==e.source&&""!==e.source&&(v=e.source+". ");var D="";switch(void 0!==e.institution&&""!==e.institution&&(D=e.institution+". "),e.type){case"book":a+=n,""===n&&(a+=t),a+=c+r+i+o+d+u+m+y+f+p+g;break;case"miscellany":a+=n+c+r+D+u+y+f+p;break;case"book_section":a+=n+c+r+"En: "+t+v+i+l+o+d+u+m+y+f+p+g;break;case"article":a+=n+c+r+v+o+"p."+s+y+f+p+h;break;case"thesis":a+=n+c+r+D+u+"p."+s+y+f+p;break;case"report":a+=n+c+r+D+u+"p."+s+y+f+p;break;case"working_paper":a+=n+c+r+D+u+"p."+s+y+f+p;break;case"conference_proceedings":a+=n+c+r+v+D+u+m+s+y+f+p}return a}}).filter("references_format_without_url",function(){return function(e){var a="",n="";e.authors=[].concat(e.authors),n+=1===e.authors.length?e.authors:2===e.authors.length?e.authors[0]+" & "+e.authors[1]:3===e.authors.length?e.authors[0]+" , "+e.authors[1]+" & "+e.authors[2]:e.authors[0]+" et al. ";var t="";e.editors=[].concat(e.editors),t+=1===e.editors.length?e.editors+" (ed.)":2===e.editors.length?e.editors[0]+" & "+e.editors[1]+" (eds.)":3===e.editors.length?e.editors[0]+" , "+e.editors[1]+" & "+e.editors[2]+" (eds.)":e.editors[0]+"et al. (eds.)";var c="";c=void 0!==e.year&&""!==e.year?" ("+e.year+"). ":"(S.F.)";var r="";void 0!==e.title&&""!==e.title&&(r=e.title+". ");var i="";void 0!==e.series&&""!==e.series&&(i=e.series);var l="";void 0!==e.chapter&&""!==e.chapter&&(l=e.chapter);var o="";void 0!==e.volume&&""!==e.volume&&(o=" Vol. "+e.volume+". ");var s="";void 0!==e.pages&&""!==e.pages&&(s=e.pages+". ");var d="";void 0!==e.edition&&""!==e.edition&&(d=e.edition+". ");var u="";void 0!==e.address&&""!==e.address&&(u=e.address+": ");var m="";void 0!==e.publisher&&""!==e.publisher&&(m=e.publisher+". ");var y="";void 0!==e.accessed&&""!==e.accessed&&(y="[ Consultado"+e.accessed+"].");var f="";void 0!==e.isbn&&""!==e.isbn&&(f=e.isbn);var p="";void 0!==e.issn&&""!==e.issn&&(p=e.issn);var g="";void 0!==e.source&&""!==e.source&&(g=e.source+". ");var h="";switch(void 0!==e.institution&&""!==e.institution&&(h=e.institution+". "),e.type){case"book":a+=n,""===n&&(a+=t),a+=c+r+i+o+d+u+m+y+f;break;case"miscellany":a+=n+c+r+h+u+y;break;case"book_section":a+=n+c+r+"En: "+t+g+i+l+o+d+u+m+y+f;break;case"article":a+=n+c+r+g+o+"p."+s+y+p;break;case"thesis":a+=n+c+r+h+u+"p."+s+y;break;case"report":a+=n+c+r+h+u+"p."+s+y;break;case"working_paper":a+=n+c+r+h+u+"p."+s+y;break;case"conference_proceedings":a+=n+c+r+g+h+u+m+s+y}return a}}),angular.module("app.controllers.findLanguageName",[]).controller("FindLanguageNameCrtl",["$scope",function(e){e.findLanguageName=function(a){if(void 0!==a&&""!==a)for(var n=0,t=e.idiomas.length;t>n;n+=1)if(e.idiomas[n].ISO===a)return e.idiomas[n].Idioma}}]),angular.module("app.controllers.datepicker",[]).controller("DatepickerCtrl",["$scope",function(e){e.today=function(){e.dt=new Date},e.today(),e.clear=function(){e.dt=null},e.disabled=function(e,a){return"day"===a&&(0===e.getDay()||6===e.getDay())},e.toggleMin=function(){e.minDate=e.minDate?null:new Date},e.toggleMin(),e.maxDate=new Date(2020,5,22),e.open=function(a){e.status.opened=!0},e.setDate=function(a,n,t){e.dt=new Date(a,n,t)},e.dateOptions={formatYear:"yy",startingDay:1},e.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],e.format=e.formats[0],e.status={opened:!1};var a=new Date;a.setDate(a.getDate()+1);var n=new Date;n.setDate(a.getDate()+2),e.events=[{date:a,status:"full"},{date:n,status:"partially"}],e.getDayClass=function(a,n){if("day"===n)for(var t=new Date(a).setHours(0,0,0,0),c=0;c<e.events.length;c++){var r=new Date(e.events[c].date).setHours(0,0,0,0);if(t===r)return e.events[c].status}return""}}]),angular.module("app.controllers.collapse",[]).controller("CollapseDemoCtrl",["$scope",function(e){e.isCollapsed=!0,e.isCollapsed_1=!0,e.isCollapsed_2=!0}]),angular.module("app.controllers.checkBox",[]).controller("CheckBoxCrtl",["$scope",function(e){e.updateSelectionEvent=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.annualCycleAtomizedType.Event===a.name?(a.checked=!1,e.annualCycleAtomizedType.Event=""):(a.checked=!0,e.annualCycleAtomizedType.Event=a.name)},e.updateSelectionFeeding=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.feedingAtomizedType.type===a.name?(a.checked=!1,e.feedingAtomizedType.type=""):(a.checked=!0,e.feedingAtomizedType.type=a.name)},e.updateSelectionThropic=function(a){for(var n=-1,t=0,c=e.feedingAtomizedType.thropic.length;c>t;t++)e.feedingAtomizedType.thropic[t].strategy===a.name&&(n=t);n>-1?e.feedingAtomizedType.thropic.splice(n,1):e.feedingAtomizedType.thropic.push({strategy:a.name})},e.updateSelectionDispersalType=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.formData.dispersal.dispersalAtomized.type===a.name?(a.checked=!1,e.formData.dispersal.dispersalAtomized.type=""):(a.checked=!0,e.formData.dispersal.dispersalAtomized.type=a.name)},e.updateSelectionStructureDispersed=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.formData.dispersal.dispersalAtomized.structureDispersed===a.name?(a.checked=!1,e.formData.dispersal.dispersalAtomized.structureDispersed=""):(a.checked=!0,e.formData.dispersal.dispersalAtomized.structureDispersed=a.name)},e.updateSelectionOrigin=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.invasivenessAtomizedType.origin===a.name?(a.checked=!1,e.invasivenessAtomizedType.origin=""):(a.checked=!0,e.invasivenessAtomizedType.origin=a.name)},e.updateSelectionPresence=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.invasivenessAtomizedType.presence===a.name?(a.checked=!1,e.invasivenessAtomizedType.presence=""):(a.checked=!0,e.invasivenessAtomizedType.presence=a.name)},e.updateSelectionPersistence=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.invasivenessAtomizedType.persistence===a.name?(a.checked=!1,e.invasivenessAtomizedType.persistence=""):(a.checked=!0,e.invasivenessAtomizedType.persistence=a.name)},e.updateSelectionDistribution=function(a){var n=e.invasivenessAtomizedType.distribution.indexOf(a);n>-1?e.invasivenessAtomizedType.distribution.splice(n,1):e.invasivenessAtomizedType.distribution.push(a.name)},e.updateSelectionHarmful=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.invasivenessAtomizedType.harmful===a.name?(a.checked=!1,e.invasivenessAtomizedType.harmful=""):(a.checked=!0,e.invasivenessAtomizedType.harmful=a.name)},e.updateSelectionAbundance=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.invasivenessAtomizedType.abundance===a.name?(a.checked=!1,e.invasivenessAtomizedType.abundance=""):(a.checked=!0,e.invasivenessAtomizedType.abundance=a.name)},e.updateSelectionTrend=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.invasivenessAtomizedType.trend===a.name?(a.checked=!1,e.invasivenessAtomizedType.trend=""):(a.checked=!0,e.invasivenessAtomizedType.trend=a.name)},e.updateSelectionRateOfSpread=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.invasivenessAtomizedType.rateOfSpread===a.name?(a.checked=!1,e.invasivenessAtomizedType.rateOfSpread=""):(a.checked=!0,e.invasivenessAtomizedType.rateOfSpread=a.name)},e.updateSelectionRegulatoryListing=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.invasivenessAtomizedType.regulatoryListing===a.name?(a.checked=!1,e.invasivenessAtomizedType.regulatoryListing=""):(a.checked=!0,e.invasivenessAtomizedType.regulatoryListing=a.name)},e.updateSelectionLocalityType=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.invasivenessAtomizedType.localityType===a.name?(a.checked=!1,e.invasivenessAtomizedType.localityType=""):(a.checked=!0,e.invasivenessAtomizedType.localityType=a.name)},e.updateSelectionLocationValue=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.invasivenessAtomizedType.locationValue===a.name?(a.checked=!1,e.invasivenessAtomizedType.locationValue=""):(a.checked=!0,e.invasivenessAtomizedType.locationValue=a.name)},e.updateSelectionPublicationDatePrecision=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.invasivenessAtomizedType.publicationDatePrecision===a.name?(a.checked=!1,e.invasivenessAtomizedType.publicationDatePrecision=""):(a.checked=!0,e.invasivenessAtomizedType.publicationDatePrecision=a.name)},e.updateSelectionDistributionScope=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.distributionClass.distributionScope.type===a.name?(a.checked=!1,e.distributionClass.distributionScope.type=""):(a.checked=!0,e.distributionClass.distributionScope.type=a.name)},e.updateSelectionRegion=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.populationBiologyAtomized.region===a.name?(a.checked=!1,e.populationBiologyAtomized.region=""):(a.checked=!0,e.populationBiologyAtomized.region=a.name)},e.updateSelectionAutority=function(a){var n=e.threatStatusClass.threatStatusAtomized.authority.indexOf(a);n>-1?e.threatStatusClass.threatStatusAtomized.authority.splice(n,1):e.threatStatusClass.threatStatusAtomized.authority.push(a.name)},e.updateSelectionApendiceCITES=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.threatStatusClass.threatStatusAtomized.apendiceCITES===a.name?(a.checked=!1,e.threatStatusClass.threatStatusAtomized.apendiceCITES=""):(a.checked=!0,e.threatStatusClass.threatStatusAtomized.apendiceCITES=a.name)},e.updateSelectionProtectionLegal=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.legislationAtomizedType.protectionLegalStatus===a.name?(a.checked=!1,e.legislationAtomizedType.protectionLegalStatus=""):(a.checked=!0,e.legislationAtomizedType.protectionLegalStatus=a.name);
},e.updateSelectionProtectionLegalStatus=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.legislationAtomizedType.status===a.name?(a.checked=!1,e.legislationAtomizedType.status.origin=""):(a.checked=!0,e.legislationAtomizedType.status=a.name)},e.updateSelectionProtectionLegalType=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.legislationAtomizedType.type===a.name?(a.checked=!1,e.legislationAtomizedType.type=""):(a.checked=!0,e.legislationAtomizedType.type=a.name)},e.updateSelectionProtectionLegalNorm=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.legislationAtomizedType.norm===a.name?(a.checked=!1,e.legislationAtomizedType.norm=""):(a.checked=!0,e.legislationAtomizedType.norm=a.name)},e.updateSelectionPartUsedCategory=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.usesAtomizedType.partUsed===a.name?(a.checked=!1,e.usesAtomizedType.partUsed=""):(a.checked=!0,e.usesAtomizedType.partUsed=a.name)},e.updateSelectionUseTypeAtomized=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.usesAtomizedType.useTypeAtomized===a.name?(a.checked=!1,e.usesAtomizedType.useTypeAtomized=""):(a.checked=!0,e.usesAtomizedType.useTypeAtomized=a.name)},e.updateSelectionManagementType=function(a,n){angular.forEach(n,function(e){e.checked=!1}),e.managementAndConservationAtomizedType.type===a.name?(a.checked=!1,e.managementAndConservationAtomizedType.type=""):(a.checked=!0,e.managementAndConservationAtomizedType.type=a.name)},e.updateSelectionManagementAction=function(a){var n=e.managementAndConservationAtomizedType.actions.indexOf(a);n>-1?e.managementAndConservationAtomizedType.actions.splice(n,1):e.managementAndConservationAtomizedType.actions.push(a.name)},e.updateSelectionLicence=function(a,n,t){if(angular.forEach(n,function(e){e.checked=!1}),e.ancillaryData.license===a.nombre||void 0!==document.getElementById(t).children[0])a.checked=!1,e.ancillaryData.license="",void 0!==document.getElementById(t).children[0]&&document.getElementById("ancillaryData.license").remove();else if(a.checked=!0,"Otra"===a.nombre&&void 0===document.getElementById(t).children[0]){var c=document.createElement("input");c.type="text",c.id="ancillaryData.license",document.getElementById(t).appendChild(c)}else void 0!==document.getElementById(t).children[0]&&document.getElementById("ancillaryData.license").remove(),e.ancillaryData.license=a.nombre}}]),angular.module("app.services.threatStatus",[]).factory("ThreatStatusFactory",function(){return function(){this.threatStatusClass={threatStatusAtomized:{threatCategory:{measurementID:"",measurementType:"",measurementValue:"",measurementAccuracy:"",measurementUnit:"",measurementDeterminedDate:"",measurementDeterminedBy:[],measurementMethod:"",measurementRemarks:"",relatedTo:""},authority:[],appliesTo:{country:"",stateProvince:"",county:"",municipality:"",locality:""},apendiceCITES:"",ancillaryData:[]},threatStatusUnstructured:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.threatStatus",[]).controller("ThreatStatusCtrl",["$scope","ReferenceFactory","AncillaryDataFactory","ThreatStatusFactory",function(e,a,n,t){var c=new t;e.threatStatusClass=c.threatStatusClass;var r=new n;e.ancillaryData=r.ancillaryData;var i=new a;e.reference=i.reference;var l=angular.copy(e.threatStatusClass),o=angular.copy(e.reference),s=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_threat="",e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.checked=!1,e.slide=function(){e.checked=!e.checked},e.addThreatStatus=function(){""!==e.threatStatusClass.threatStatusUnstructured&&console.log("enviar cambios")},e.addThreatStatusClass=function(a,n){JSON.stringify(n)!==JSON.stringify(l)&&(""!==e.index_threat?a[e.index_threat]=angular.copy(n):c.add(a,n),e.threatStatusClass=l,l=angular.copy(e.threatStatusClass),e.index_threat="",$("input:checkbox").removeAttr("checked"))},e.removeThreatStatus=function(e,a){c["delete"](e,a)},e.editThreatStatus=function(a,n,t){e.index_threat=t,e.threatStatusClass=angular.copy(n)},e.addAncillaryData=function(a,n){if(""!==n.license){var t=document.getElementById("ancillaryData.license");void 0!==t&&null!==t&&(n.license=t.value),r.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){i.addTo(e.formData.references,a)}),e.ancillaryData=s,s=angular.copy(e.ancillaryData),e.resetLicenseList(t,e.lincese_list),e.index_ancillary="",$("#ancillaryThreat").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){r.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseThreatStatus").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryThreat").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(s);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary=""},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(i.addTo(a,n,e.index_reference),e.reference=o,o=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){i.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(o),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.territory",[]).factory("TerritoryFactory",function(){return function(){this.territory={territoryAtomized:{extentOfOccurrence:"",areaOfOccupancy:""},territoryUnstructured:"",ancillaryData:[]}}}),angular.module("app.controllers.territory",[]).controller("TerritoryCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.reference),i=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addTerritory=function(){""!==e.formData.territory.territoryUnstructured&&console.log("enviar cambios")},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=i,i=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryTerritory").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseTerritory").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryTerritory").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryTerritory").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=r,r=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(r),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.populationBiology",[]).factory("PopulationBiologyFactory",function(){return function(){this.populationBiologyAtomized={region:"",abundanceData:"",densityData:"",patternDistribution:"",size:"",sexRatio:"",fecundity:"",mortalityRate:"",birthRate:"",numberIndividualsPerObservation:"",averageDensity:"",populationTrend:"",recruitment:"",populationGrowthRate:"",emigration:"",immigration:"",descriptionLifeStages:"",proportionIndividualsPerStageLife:"",carryingCapacity:"",ancillaryData:[]},this.populationBiology={populationBiologyAtomized:[],populationBiologyUnstructured:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.populationBiology",[]).controller("PopulationBiologyCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){e.populationBiologyAtomized=e.populationBiologyFactoryLocal.populationBiologyAtomized;var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.populationBiologyAtomized),i=angular.copy(e.reference),l=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_population="",e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addPopulationBiology=function(){""!==e.formData.populationBiology.populationBiologyUnstructured&&console.log("enviar cambios")},e.addPopulationBiologyAtomized=function(a,n){JSON.stringify(n)!==JSON.stringify(r)&&(""!==e.index_population?a[e.index_population]=angular.copy(n):e.populationBiologyFactoryLocal.add(a,n),e.populationBiologyAtomized=r,r=angular.copy(e.populationBiologyAtomized),e.index_population="")},e.removePopulation=function(a,n){e.populationBiologyFactoryLocal["delete"](a,n)},e.editPopulation=function(a,n,t){e.index_population=t,e.populationBiologyAtomized=angular.copy(n)},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=l,l=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryPopulation").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicensePopulation").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryPopulation").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(l);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryPopulation").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=i,i=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(i),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.legislation",[]).factory("LegislationFactory",function(){return function(){this.legislationAtomizedType={legislationName:"",protectionLegalStatus:"",legislationRead:"",status:"",type:"",norm:"",appliesTo:{country:"",stateProvince:"",county:"",municipality:"",locality:""},ancillaryData:[]},this.legislation={legislationAtomized:[],legislationUnstructured:"",ancillaryData:[]},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.legislation",[]).controller("LegislationCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){e.legislationAtomizedType=e.legislationFactoryLocal.legislationAtomizedType;var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.legislationAtomizedType),i=angular.copy(e.reference),l=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_legislation="",e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addLegislation=function(){""!==e.formData.legislation.legislationUnstructured&&console.log("enviar cambios")},e.addLegislationAtomized=function(a,n){JSON.stringify(n)!==JSON.stringify(r)&&(""!==e.index_legislation?a[e.index_legislation]=angular.copy(n):e.legislationFactoryLocal.add(a,n),e.legislationAtomizedType=r,r=angular.copy(e.legislationAtomizedType),e.index_legislation="")},e.removeLegislationAtomized=function(a,n){e.legislationFactoryLocal["delete"](a,n)},e.editLegislationAtomized=function(a,n,t){e.legislationAtomizedType=angular.copy(n),e.index_legislation=t},e.cancelLegislationAtomized=function(){e.legislationAtomizedType=angular.copy(r),e.index_legislation=""},e.addAncillaryData=function(a,n){if(""!==n.license){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=l,l=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryLegislation").collapse("hide")}else alert("La licencia debe ser seleccionada")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,document.getElementById("ManualLicenseLegislation").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryLegislation").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(l);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryLegislation").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=i,i=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(i),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.services.directThreats",[]).factory("DirectThreatsFactory",function(){return function(){this.directThreats={directThreatsAtomized:[],directThreatsUnstructured:"",ancillaryData:[]},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.directThreats",[]).controller("DirectThreatsCtrl",["$scope","ReferenceFactory","AncillaryDataFactory",function(e,a,n){var t=new n;e.ancillaryData=t.ancillaryData;var c=new a;e.reference=c.reference;var r=angular.copy(e.reference),i=angular.copy(e.ancillaryData);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addDirectThreats=function(){""!==e.formData.directThreats.directThreatsUnstructured&&console.log("enviar cambios")},e.removeDirectAtomized=function(a,n){e.directThreatsFactoryLocal["delete"](a,n)},e.addAncillaryData=function(a,n){var r=document.getElementById("ancillaryData.license");void 0!==r&&null!==r&&(n.license=r.value),t.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){c.addTo(e.formData.references,a)}),e.ancillaryData=i,i=angular.copy(e.ancillaryData),e.resetLicenseList(r,e.lincese_list),e.index_ancillary="",$("#ancillaryDirect").collapse("hide")},e.removeAncillaryData=function(e,a){t.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,a.disabled=!0,document.getElementById("ManualLicense").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}}),$("#ancillaryDirect").collapse("show")},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary="",$("#ancillaryDirect").collapse("hide")},e.findAncillary=function(a){angular.forEach(e.formData.ancillaryData,function(n){null!==a&&a===n.source&&(e.ancillaryData=angular.copy(n))})},e.addReference=function(a,n){""!==n.type?(c.addTo(a,n,e.index_reference),e.reference=r,r=angular.copy(e.reference),e.checked=!e.checked,e.index_reference=""):alert("El tipo de referencia debe ser seleccionado")},e.removeReference=function(e,a){c.deleteFrom(e,a)},e.editReference=function(a,n,t){e.reference=angular.copy(n),e.checked=!e.checked,e.index_reference=t},e.cancelReference=function(){e.reference=angular.copy(r),e.checked=!e.checked,e.index_reference=""}}]),angular.module("app.controllers.abstract",[]).controller("AbstractCtrl",["$scope",function(e){e.addAbstract=function(){""!==e.formData["abstract"]&&console.log("enviar cambios")}}]),angular.module("app.services.associatedParty",[]).factory("AssociatedPartyFactory",function(){return function(){this.associatedParty={firstName:"",lastName:"",position:"",organisation:"",address:"",city:"",state:"",country:"",postalCode:"",phone:"",email:"",homepage:"",personnelDirectory:"",personnelIdentifier:"",role:""},this.add=function(e,a){e.push(a)},this["delete"]=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.associatedParty",[]).controller("AssociatedPartyCtrl",["$scope","AssociatedPartyFactory",function(e,a){var n=new a;e.associatedParty=n.associatedParty;var t=angular.copy(e.associatedParty);e.index_associated="",e.addAssociated=function(){e.formData.associatedParty.length>0&&console.log("enviar")},e.addAssociatedParty=function(a,c){JSON.stringify(c)!==JSON.stringify(t)&&(""!==e.index_associated?a[e.index_associated]=angular.copy(c):n.add(a,c),e.associatedParty=t,t=angular.copy(e.associatedParty))},e.removeAssociatedParty=function(e,a){n["delete"](e,a)},e.editAssociatedParty=function(a,n,t){e.index_associated=t,e.associatedParty=angular.copy(n)},e.cancelAssociatedParty=function(){e.associatedParty=angular.copy(t),e.index_associated=""}}]),angular.module("app.controllers.moreInformation",[]).controller("MoreInformationCtrl",["$scope",function(e){e.addMoreInformation=function(){""!==e.formData.moreInformation&&console.log("enviar cambios")}}]),angular.module("app.services.ancillary",[]).factory("AncillaryDataFactory",function(){return function(){this.ancillaryData={identifier:"",dataType:"",mimeType:"",agent:[],created:"",modified:"",license:"Atribución - No Comercial - Compartir igual (CC BY-NC-SA 4.0)",rights:"",rightsHolder:"",bibliographicCitation:"",audience:[],source:"",subject:[],description:"",mediaURL:[],thumbnailURL:"",location:"",geoPoint:"",reference:[],additionalInformation:"",dataObject:""},this.addTo=function(e,a,n){""!==n?e[n]=angular.copy(a):e.push(a)},this.deleteFrom=function(e,a){var n=e.indexOf(a);e.splice(n,1)}}}),angular.module("app.controllers.ancillary",[]).controller("AncillaryDataCtrl",["$scope","$http","AncillaryDataFactory","ReferenceFactory",function(e,a,n,t){var c=new n;e.ancillaryData=c.ancillaryData;var r=new t;e.reference=r.reference;var i=angular.copy(e.ancillaryData),l=angular.copy(e.reference);e.lincese_list=angular.copy(e.lenguajes.licences),e.prov_contenido=angular.copy(e.lenguajes.provContenido),e.imageurl="",e.checked=!1,e.index_ancillary="",e.index_reference="",e.slide=function(){e.checked=!e.checked},e.addAncillaries=function(){e.formData.ancillaryData.length>0&&console.log("enviar cambios")},e.addAncillaryData=function(a,n){if(JSON.stringify(n)!==JSON.stringify(i)){var t=document.getElementById("ancillaryData.license");void 0!==t&&null!==t&&(n.license=t.value),c.addTo(a,n,e.index_ancillary),angular.forEach(n.reference,function(a){r.addTo(e.formData.references,a)}),e.ancillaryData=i,e.reference=l,i=angular.copy(e.ancillaryData),l=angular.copy(e.reference),e.resetLicenseList(t,e.lincese_list),e.index_ancillary="";var o=document.getElementById("imageD");void 0!==o&&null!==o&&o.parentNode.removeChild(o)}},e.removeAncillaryData=function(e,a){c.deleteFrom(e,a)},e.editAncillaryData=function(a,n,t){e.index_ancillary=t,e.ancillaryData=angular.copy(n);var c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n.license)if(n.license===e.nombre)e.checked=!0,c=!0;else if(e.checked=!1,"Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=n.license,a.disabled=!0,document.getElementById("ManualLicense").appendChild(a)}else{var t=document.getElementById("ancillaryData.license");t.value=n.license}})},e.cancelAncillaryData=function(){e.ancillaryData=angular.copy(i);var a=document.getElementById("ancillaryData.license");e.resetLicenseList(a,e.lincese_list),e.index_ancillary=""},e.addReference=function(a,n){""!==n.type&&(r.addTo(a,n,e.index_reference),e.reference=l,l=angular.copy(e.reference),e.checked=!e.checked,e.index_reference="")},e.removeReference=function(e,a){r.deleteFrom(e,a)},e.editReference=function(a,n,t){e.index_reference=t,e.reference=angular.copy(n),e.checked=!e.checked},e.cancelReference=function(){e.reference=angular.copy(l),e.checked=!e.checked,e.index_reference=""},e.getInfoLicence=function(n,t){if(t.rightsHolder="",t.bibliographicCitation="",t.source="",t.license="",e.imageurl="",angular.forEach(e.lincese_list,function(e){e.checked=!1}),void 0!==n&&n.length>0){var c=n.split("/");if(n.indexOf("www.flickr.com")>-1){var r=c[5];a.get("https://api.flickr.com/services/rest/?&method=flickr.photos.getInfo&photo_id="+r+"&api_key=d70bb0faa317f97f15ecf636ee77c33e&format=json&per_page=500").then(function(n){var c=n.data.replace("jsonFlickrApi(","").replace("})","}").replace(/\n/g,""),i=JSON.parse(c);t.rightsHolder=i.photo.owner.username,t.bibliographicCitation=i.photo.description._content;var l;switch(i.photo.license){case"0":l="All Rights Reserved";break;case"1":l="http://creativecommons.org/licenses/by-nc-sa/2.0/";break;case"2":l="http://creativecommons.org/licenses/by-nc/2.0/";break;case"3":l="http://creativecommons.org/licenses/by-nc-nd/2.0/";break;case"4":l="http://creativecommons.org/licenses/by/2.0/";break;case"5":l="http://creativecommons.org/licenses/by-sa/2.0/";break;case"6":l="http://creativecommons.org/licenses/by-nd/2.0/";break;case"7":l="http://flickr.com/commons/usage/";break;case"8":l="http://www.usa.gov/copyright.shtml"}a.get("https://api.flickr.com/services/rest/?&method=flickr.photos.getSizes&photo_id="+r+"&api_key=d70bb0faa317f97f15ecf636ee77c33e&format=json&per_page=500").then(function(a){var n=a.data.replace("jsonFlickrApi(","").replace(")","").replace(/\n/g,""),c=JSON.parse(n);"undefined"!=typeof c.sizes.size[5].source&&(t.source=c.sizes.size[5].source.replace(/'/g,"''"),e.imageurl=c.sizes.size[5].source.replace(/'/g,"''"))});var o=!1;angular.forEach(e.lincese_list,function(e){if(null!==l)if(l===e.nombre)e.checked=!0,o=!0;else if("Otra"===e.nombre&&!o)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=l,a.disabled=!0,document.getElementById("ManualLicense").appendChild(a)}else{var n=document.getElementById("ancillaryData.license");n.value=l}})})}if(n.indexOf("commons.wikimedia.org")>-1){var i=c[c.length-1].split(":")[1];$.ajax({url:"https://commons.wikimedia.org/w/api.php?action=query&titles=Image:"+i+"&prop=imageinfo&iiprop=extmetadata&format=json",dataType:"JSONP",jsonpCallback:"callback",type:"GET",headers:{"Api-User-Agent":"Example/1.0"},success:function(a){var c=a.query.pages[Object.keys(a.query.pages)[0]].imageinfo[0].extmetadata;t.source=n,t.rightsHolder=c.Artist.value,t.bibliographicCitation=c.ImageDescription.value;var r="";r=void 0===c.LicenseUrl?c.LicenseShortName.value:c.LicenseUrl.value;var l=!1;angular.forEach(e.lincese_list,function(e){if(null!==r)if(r===e.nombre)e.checked=!0,l=!0;else if("Otra"===e.nombre&&!l)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var a=document.createElement("input");a.type="text",a.id="ancillaryData.license",a.value=r,a.disabled=!0,document.getElementById("ManualLicense").appendChild(a)}else{var n=document.getElementById("ancillaryData.license");n.value=r}}),$.ajax({url:"https://commons.wikimedia.org/w/api.php?action=query&titles=Image:"+i+"&prop=imageinfo&iiprop=url&format=json",dataType:"JSONP",jsonpCallback:"callback",type:"GET",headers:{"Api-User-Agent":"Example/1.0"},success:function(a){var n=a.query.pages[Object.keys(a.query.pages)[0]].imageinfo[0].url;e.imageurl=n}})}})}if(n.indexOf("www.youtube.com")>-1){var l=c[c.length-1].split("=")[1];$.ajax({url:"https://www.googleapis.com/youtube/v3/videos?part=snippet%2CcontentDetails%2Cstatistics%2Cstatus&id="+l+"&key=AIzaSyBNk4m-R-PyUt5hmtpBc3CaQ-fophHIjkQ",dataType:"JSONP",jsonpCallback:"callback",type:"GET",headers:{"Api-User-Agent":"Example/1.0"},success:function(a){console.log(a);var n=a.items[0].contentDetails.licensedContent,c=!1;angular.forEach(e.lincese_list,function(e){if(null!==n&&n){var t=a.items[0].status.license;if(t===e.nombre)e.checked=!0,c=!0;else if("Otra"===e.nombre&&!c)if(null===document.getElementById("ancillaryData.license")){e.checked=!0;var r=document.createElement("input");r.type="text",r.id="ancillaryData.license",r.value=t,r.disabled=!0,document.getElementById("ManualLicense").appendChild(r)}else{var i=document.getElementById("ancillaryData.license");i.value=t}}}),t.rightsHolder=a.items[0].snippet.channelTitle,t.bibliographicCitation=a.items[0].snippet.description}})}if(n.indexOf("www.xeno-canto.org/")>-1){var o=c[c.length-1];a.jsonp("http://www.xeno-canto.org/api/2/recordings?query=nr:"+o).success(function(a,n,t,c){e.posts=a}).error(function(e,a,n,t){})}}}}]),angular.module("homeApp",["ng","ngCookies","ngSanitize","pascalprecht.translate","ui.directives","ui.filters","ui.router","ui.bootstrap","ngAnimate","ngFileUpload","angularModalService","ngTable"]).controller("homeController",["$scope","$http","ngTableParams",function(e,a,n){e.tableParams=new n({page:1,count:10},{counts:[],getData:function(e,n){var t=n.page(),c=n.count(),r="http://apimamut.elasticbeanstalk.com/get-list",i={q:"angular",page:t,per_page:c};a.get(r,{params:i,headers:{"Content-Type":"application/json"}}).then(function(a){n.total(a.data.total),e.resolve(a.data.docs)},function(a){console.log(a),e.reject()})}}),e.search=function(){var t=e.searchT;e.tableParams=new n({page:1,count:10},{counts:[],getData:function(e,n){var c=n.page(),r=n.count(),i="http://apimamut.elasticbeanstalk.com/search/tax_author/"+t,l={q:"angular",page:c,per_page:r};a.get(i,{params:l,headers:{"Content-Type":"application/json"}}).then(function(a){n.total(a.data.total),e.resolve(a.data)},function(a){console.log(a),e.reject()})}})},$(document).ready(function(){$(".filterable .btn-filter").click(function(){var e=$(this).parents(".filterable"),a=e.find(".filters input"),n=e.find(".table tbody");a.prop("disabled")===!0?(a.prop("disabled",!1),a.first().focus()):(a.val("").prop("disabled",!0),n.find(".no-result").remove(),n.find("tr").show())}),$(".filterable .filters input").keyup(function(e){var a=e.keyCode||e.which;if("9"!==a){var n=$(this),t=n.val().toLowerCase(),c=n.parents(".filterable"),r=c.find(".filters th").index(n.parents("th")),i=c.find(".table"),l=i.find("tbody tr"),o=l.filter(function(){var e=$(this).find("td").eq(r).text().toLowerCase();return-1===e.indexOf(t)});i.find("tbody .no-result").remove(),l.show(),o.hide(),o.length===l.length&&i.find("tbody").prepend($('<tr class="no-result text-center"><td colspan="'+i.find(".filters th").length+'">No se encontraron resultados</td></tr>'))}})})}]),angular.module("formApp",["ng","ngCookies","ngSanitize","pascalprecht.translate","ui.directives","ui.filters","ui.router","ui.bootstrap","ngFileUpload","angularModalService","ngResource","ngRoute","pageslide-directive","ngAnimate","app.controllers.form","app.controllers.checkBox","app.controllers.datepicker","app.controllers.collapse","app.controllers.findLanguageName","app.controllers.ubicacion","app.controllers.upload","app.controllers.modal","app.routes","app.routes.translate","app.controllers.reference","app.services.reference","app.controllers.ancillary","app.services.ancillary","app.controllers.measurement","app.services.measurement","app.controllers.taxonRecordName","app.services.taxonRecordName","app.controllers.commonName","app.services.commonName","app.controllers.synonmy","app.services.synonmy","app.controllers.hierarchy","app.services.hierarchy","app.controllers.abstract","app.controllers.moreInformation","app.controllers.briefDescription","app.controllers.fullDescription","app.services.fullDescription","app.controllers.identificationKeys","app.services.identificationKeys","app.controllers.lifeForm","app.services.lifeForm","app.controllers.lifeCycle","app.services.lifeCycle","app.controllers.reproduction","app.services.reproduction","app.controllers.annualCycle","app.services.annualCycle","app.controllers.feeding","app.services.feeding","app.controllers.dispersal","app.services.dispersal","app.controllers.behavior","app.services.behavior","app.controllers.interactions","app.services.interactions","app.controllers.molecularData","app.services.molecularData","app.controllers.migratory","app.services.migratory","app.controllers.environmentalEnvelope","app.services.environmentalEnvelope","app.controllers.ecologicalSignificance","app.services.ecologicalSignificance","app.controllers.invasiveness","app.services.invasiveness","app.controllers.habitat","app.services.habitat","app.controllers.distribution","app.services.distribution","app.controllers.endemic","app.services.endemic","app.controllers.territory","app.services.territory","app.controllers.populationBiology","app.services.populationBiology","app.controllers.threatStatus","app.services.threatStatus","app.controllers.directThreats","app.services.directThreats","app.controllers.legislation","app.services.legislation","app.controllers.use","app.services.use","app.controllers.managementAndConservation","app.services.managementAndConservation","app.controllers.associatedParty","app.services.associatedParty"]);